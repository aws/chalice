
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Chalice &#8212; AWS Chalice</title><link rel="stylesheet" href="_static/bootstrap-reboot.css" type="text/css" />
    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/default.css" />
    <link rel="stylesheet" href="_static/custom-tabs.css" type="text/css" />
    

    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script type="text/javascript">
        function _scroll(subjectId) {
            var subjectElement = $(subjectId);
            var actualSubjectHeight = subjectElement.height();
            var startingPosition = subjectElement[0].getBoundingClientRect().top;
            return function() {
                var availableHeight = $(window).height() - startingPosition;
                // Subtract the scroll position to account for sticky movement.
                availableHeight += Math.min($(window).scrollTop(), 40);
                var cappedHeight = Math.min(actualSubjectHeight, availableHeight);
                if (subjectElement.css("height") !== cappedHeight) {
                    subjectElement.css("height", cappedHeight);
                }
            };
        }

        // Scroll and resize the the columns when scrolled.
        $(function() {
            var rightScroll = _scroll("#right-column > .column-body");
            var scrollFn = function() {
                rightScroll.call(this, arguments);
            };
            scrollFn();
            $(window).scroll(scrollFn);
            $(window).resize(scrollFn);
        });

        // Scroll spy to change highlighted navigation element.
        $(function() {
            var section = document.querySelectorAll(".section");
            var sections = {};
            var i = 0;
            Array.prototype.forEach.call(section, function(e) {
                sections[e.id] = e.offsetTop;
            });
            var scrollSpy = function() {
                var scrollPosition = document.documentElement.scrollTop || document.body.scrollTop;
                for (i in sections) {
                    if (sections[i] <= scrollPosition) {
                        $('#right-column .current').removeClass('current');
                        $("#right-column a[href='#" + i + "']").addClass('current');
                    }
                }
            };
            $(window).scroll(scrollSpy);
            scrollSpy();
        });
    </script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-168492171-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-168492171-3');
    </script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sample Applications" href="samples/index.html" />
    <link rel="prev" title="Middleware" href="topics/middleware.html" />
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  </head><body>
    <header>
        <div class="header-flex width-wrapper">
            <div class="site-logo">
                <a href="index.html">
		  <span class="logo-icon"><img src="_static/img/chalice-logo-icon-small.png" /></span>
                </a>
            </div>

            <ul id="page-navigation">
                <li class="site-page first"><a href="quickstart.html">Quick Start</a></li>
                <li class="site-page"><a href="tutorials/index.html">Tutorials</a></li>
                <li class="site-page"><a href="samples/index.html">Samples</a></li>
                <li class="site-page"><a href="main.html">Documentation</a></li>
                <li class="site-page"><a href="https://github.com/aws/chalice">Code</a></li>
                <li class="site-search hidden-sm">
                    <form action="search.html" method="get">
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />
                        <input class="search-input" autocomplete="off" type="search" name="q" placeholder="Search" />
                    </form>
                </li>
            </ul>
        </div>
    </header>
    
        
        
        <section id="page-container">
            <div class="width-wrapper flex">
                <article id="document-body">
                    
                    
  <section id="chalice">
<h1>Chalice<a class="headerlink" href="#chalice" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="Chalice">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Chalice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a chalice application.  It provides:</p>
<ul class="simple">
<li><p>The ability to register routes using the <a class="reference internal" href="#Chalice.route" title="Chalice.route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">route()</span></code></a> method.</p></li>
<li><p>Within a view function, the ability to introspect the current
request using the <code class="docutils literal notranslate"><span class="pre">current_request</span></code> attribute which is an instance
of the <a class="reference internal" href="#Request" title="Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> class.</p></li>
</ul>
<dl class="py attribute">
<dt class="sig sig-object py" id="Chalice.app_name">
<span class="sig-name descname"><span class="pre">app_name</span></span><a class="headerlink" href="#Chalice.app_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the Chalice app.  This corresponds to the value provided
when instantiating a <code class="docutils literal notranslate"><span class="pre">Chalice</span></code> object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Chalice.current_request">
<span class="sig-name descname"><span class="pre">current_request</span></span><a class="headerlink" href="#Chalice.current_request" title="Permalink to this definition">¶</a></dt>
<dd><p>An object of type <a class="reference internal" href="#Request" title="Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a>.  This value is only set when
a view function is being called.  This attribute can be used to
introspect the current HTTP request.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Chalice.api">
<span class="sig-name descname"><span class="pre">api</span></span><a class="headerlink" href="#Chalice.api" title="Permalink to this definition">¶</a></dt>
<dd><p>An object of type <a class="reference internal" href="#APIGateway" title="APIGateway"><code class="xref py py-class docutils literal notranslate"><span class="pre">APIGateway</span></code></a>. This attribute can be used to control
how apigateway interprets <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> headers in both requests and
responses.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Chalice.lambda_context">
<span class="sig-name descname"><span class="pre">lambda_context</span></span><a class="headerlink" href="#Chalice.lambda_context" title="Permalink to this definition">¶</a></dt>
<dd><p>A Lambda context object that is passed to the invoked view by AWS
Lambda. You can find out more about this object by reading the
<a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">lambda context object documentation</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is only set on <code class="docutils literal notranslate"><span class="pre">&#64;app.route</span></code> handlers. For other handlers it
will be <code class="docutils literal notranslate"><span class="pre">None</span></code>. Instead the event parameter will have a <code class="docutils literal notranslate"><span class="pre">context</span></code>
property. For example <a class="reference internal" href="#S3Event.context" title="S3Event.context"><code class="xref py py-attr docutils literal notranslate"><span class="pre">S3Event.context</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Chalice.debug">
<span class="sig-name descname"><span class="pre">debug</span></span><a class="headerlink" href="#Chalice.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean value that enables debugging.  By default, this value is
<code class="docutils literal notranslate"><span class="pre">False</span></code>.  If debugging is true, then internal errors are returned back
to the client.  Additionally, debug log messages generated by the
framework will show up in the cloudwatch logs.  Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;appname&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Chalice.websocket_api">
<span class="sig-name descname"><span class="pre">websocket_api</span></span><a class="headerlink" href="#Chalice.websocket_api" title="Permalink to this definition">¶</a></dt>
<dd><p>An object of type <a class="reference internal" href="#WebsocketAPI" title="WebsocketAPI"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketAPI</span></code></a>. This attribute can be used to
send messages to websocket clients connected through API Gateway.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.route">
<span class="sig-name descname"><span class="pre">route</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.route" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a view function for a particular URI path.  This method
is intended to be used as a decorator for a view function.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;appname&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/resource/</span><span class="si">{value}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PUT&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">viewfunction</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The path to associate with the view function.  The
<code class="docutils literal notranslate"><span class="pre">path</span></code> should only contain <code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9._-]</span></code> chars and curly
braces for parts of the URL you would like to capture.  The path
should not end in a trailing slash, otherwise a validation error
will be raised during deployment.</p></li>
<li><p><strong>methods</strong> (<em>list</em>) – Optional parameter that indicates which HTTP methods
this view function should accept.  By default, only <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests
are supported.  If you only wanted to support <code class="docutils literal notranslate"><span class="pre">POST</span></code> requests, you
would specify <code class="docutils literal notranslate"><span class="pre">methods=['POST']</span></code>.  If you support multiple HTTP
methods in a single view function (<code class="docutils literal notranslate"><span class="pre">methods=['GET',</span> <span class="pre">'POST']</span></code>), you
can check the <a class="reference internal" href="#Request.method" title="Request.method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">app.current_request.method</span></code></a>
attribute to see which HTTP method was used when making the request.
You can provide any HTTP method supported by API Gateway, which
includes: <code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">POST</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code>, <code class="docutils literal notranslate"><span class="pre">PATCH</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>,
<code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code>, and <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Optional parameter to specify the name of the view
function.  You generally do not need to set this value.  The name
of the view function is used as the default value for the view name.</p></li>
<li><p><strong>authorizer</strong> (<em>Authorizer</em>) – Specify an authorizer to use for this
view.  Can be an instance of <a class="reference internal" href="#CognitoUserPoolAuthorizer" title="CognitoUserPoolAuthorizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">CognitoUserPoolAuthorizer</span></code></a>,
<a class="reference internal" href="#CustomAuthorizer" title="CustomAuthorizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">CustomAuthorizer</span></code></a> or <a class="reference internal" href="#IAMAuthorizer" title="IAMAuthorizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">IAMAuthorizer</span></code></a>.</p></li>
<li><p><strong>content_types</strong> (<em>str</em>) – A list of content types to accept for
this view.  By default <code class="docutils literal notranslate"><span class="pre">application/json</span></code> is accepted.  If
this value is specified, then chalice will reject any incoming request
that does not match the provided list of content types with a
415 Unsupported Media Type response.</p></li>
<li><p><strong>api_key_required</strong> (<em>boolean</em>) – Optional parameter to specify whether
the method required a valid API key.</p></li>
<li><p><strong>cors</strong> – Specify if CORS is supported for this view.  This can either
by a boolean value, <code class="docutils literal notranslate"><span class="pre">None</span></code>, or an instance of <a class="reference internal" href="#CORSConfig" title="CORSConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">CORSConfig</span></code></a>.
Setting this value is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> gives similar behavior to enabling
CORS in the AWS Console.  This includes injecting the
<code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Origin</span></code> header to have a value of <code class="docutils literal notranslate"><span class="pre">*</span></code> as well
as adding an <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> method to support preflighting requests.  If
you would like more control over how CORS is configured, you can provide
an instance of <a class="reference internal" href="#CORSConfig" title="CORSConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">CORSConfig</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.authorizer">
<span class="sig-name descname"><span class="pre">authorizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.authorizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a built-in authorizer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span><span class="p">,</span> <span class="n">AuthResponse</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;appname&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">authorizer</span><span class="p">(</span><span class="n">ttl_seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_auth</span><span class="p">(</span><span class="n">auth_request</span><span class="p">):</span>
    <span class="c1"># Validate auth_request.token, and then:</span>
    <span class="k">return</span> <span class="n">AuthResponse</span><span class="p">(</span><span class="n">routes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;/&#39;</span><span class="p">],</span> <span class="n">principal_id</span><span class="o">=</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">authorizer</span><span class="o">=</span><span class="n">my_auth</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">viewfunction</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ttl_seconds</strong> – The number of seconds to cache this response.
Subsequent requests that require this authorizer will use a
cached response if available.  The default is 300 seconds.</p></li>
<li><p><strong>execution_role</strong> – An optional IAM role to specify when invoking
the Lambda function associated with the built-in authorizer.</p></li>
<li><p><strong>header</strong> – The header where the auth token will be specified.
The default is <code class="docutils literal notranslate"><span class="pre">Authorization</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.schedule">
<span class="sig-name descname"><span class="pre">schedule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expression</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a scheduled event that’s invoked on a regular schedule.
This will create a lambda function associated with the decorated
function.  It will also schedule the lambda function to be invoked
with a scheduled CloudWatch Event.</p>
<p>See <a class="reference internal" href="topics/events.html#scheduled-events"><span class="std std-ref">Scheduled Events</span></a> for more information.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="s1">&#39;cron(15 10 ? * 6L 2002-2005)&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cron_handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="s1">&#39;rate(5 minutes)&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">rate_handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">Rate</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Rate</span><span class="o">.</span><span class="n">MINUTES</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">rate_obj_handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">Cron</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;6L&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-2005&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">cron_obj_handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expression</strong> – The schedule expression to use for the CloudWatch
event rule.  This value can either be a string value or an
instance of type <code class="docutils literal notranslate"><span class="pre">ScheduleExpression</span></code>, which is either a
<a class="reference internal" href="#Cron" title="Cron"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cron</span></code></a> or <a class="reference internal" href="#Rate" title="Rate"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rate</span></code></a> object.  If a string value is
provided, it will be provided directly as the <code class="docutils literal notranslate"><span class="pre">ScheduleExpression</span></code>
value in the <a class="reference external" href="https://docs.aws.amazon.com/AmazonCloudWatchEvents/latest/APIReference/API_PutRule.html#API_PutRule_RequestSyntax">PutRule</a> API
call.</p></li>
<li><p><strong>name</strong> – The name of the function to use.  This name is combined
with the chalice app name as well as the stage name to create the
entire lambda function name.  This parameter is optional.  If it is
not provided, the name of the python function will be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.on_cw_event">
<span class="sig-name descname"><span class="pre">on_cw_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.on_cw_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a lambda function and configure it to be invoked whenever
an event that matches the given pattern flows through CloudWatch Events
or Event Bridge.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> – The event pattern to use to filter subscribed events.
See the CloudWatch Events docs for examples <a class="reference external" href="https://amzn.to/2OlqZso">https://amzn.to/2OlqZso</a></p></li>
<li><p><strong>name</strong> – The name of the function to create.  This name is combined
with the chalice app name as well as the stage name to create the
entire lambda function name.  This parameter is optional.  If it is
not provided, the name of the python function will be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.on_s3_event">
<span class="sig-name descname"><span class="pre">on_s3_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.on_s3_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a lambda function and configure it to be automatically invoked
whenever an event happens on an S3 bucket.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You can’t use the <code class="docutils literal notranslate"><span class="pre">chalice</span> <span class="pre">package</span></code> command when using the
<code class="docutils literal notranslate"><span class="pre">on_s3_event</span></code> decorator.  This is because CFN does not support
configuring an existing S3 bucket.</p>
</div>
<p>See <a class="reference internal" href="topics/events.html#s3-events"><span class="std std-ref">S3 Events</span></a> for more information.</p>
<p>This example shows how you could implement an image resizer that’s
triggered whenever an object is uploaded to the <code class="docutils literal notranslate"><span class="pre">images/</span></code> prefix
of an S3 bucket (e.g <code class="docutils literal notranslate"><span class="pre">s3://mybucket/images/house.jpg</span></code>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_s3_event</span><span class="p">(</span><span class="s1">&#39;mybucket&#39;</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;s3:ObjectCreated:Put&#39;</span><span class="p">],</span>
                 <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;images/&#39;</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.jpg&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">resize_image</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">s3</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">bucket</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">resize_image</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">s3</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">bucket</span><span class="p">,</span> <span class="s1">&#39;resized/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bucket</strong> – The name of the S3 bucket.  This bucket must already exist.</p></li>
<li><p><strong>events</strong> – A list of strings indicating the events that should trigger
the lambda function.  See <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/NotificationHowTo.html#supported-notification-event-types">Supported Event Types</a>
for the full list of strings you can provide.  If this option is not
provided, a default of <code class="docutils literal notranslate"><span class="pre">['s3:ObjectCreated:*']</span></code> is used, which will
configure the lambda function to be invoked whenever a new object
is created in the S3 bucket.</p></li>
<li><p><strong>prefix</strong> – An optional key prefix.  This specifies that
the lambda function should only be invoked if the key starts with
this prefix (e.g. <code class="docutils literal notranslate"><span class="pre">prefix='images/'</span></code>).  Note that this value
is not a glob (e.g. <code class="docutils literal notranslate"><span class="pre">images/*</span></code>), it is a literal string match
for the start of the key.</p></li>
<li><p><strong>suffix</strong> – An optional key suffix.  This specifies that the
lambda function should only be invoked if the key name ends with
this suffix (e.g. <code class="docutils literal notranslate"><span class="pre">suffix='.jpg'</span></code>).  Note that this value is
not a glob (e.g. <code class="docutils literal notranslate"><span class="pre">*.txt</span></code>), it is a literal string match for
the end of the key.</p></li>
<li><p><strong>name</strong> – The name of the function to use.  This name is combined
with the chalice app name as well as the stage name to create the
entire lambda function name.  This parameter is optional.  If it is
not provided, the name of the python function will be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.on_sns_message">
<span class="sig-name descname"><span class="pre">on_sns_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.on_sns_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a lambda function and configure it to be automatically invoked
whenever an SNS message is published to the specified topic.</p>
<p>See <a class="reference internal" href="topics/events.html#sns-events"><span class="std std-ref">SNS Events</span></a> for more information.</p>
<p>This example prints the subject and the contents of the message whenever
something publishes to the sns topic of <code class="docutils literal notranslate"><span class="pre">mytopic</span></code>.  In this example,
the input parameter is of type <a class="reference internal" href="#SNSEvent" title="SNSEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">SNSEvent</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">on_sns_message</span><span class="p">(</span><span class="n">topic</span><span class="o">=</span><span class="s1">&#39;mytopic&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;SNS subject: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;SNS message: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The name or ARN of the SNS topic you want to subscribe to.</p></li>
<li><p><strong>name</strong> – The name of the function to use.  This name is combined
with the chalice app name as well as the stage name to create the
entire lambda function name.  This parameter is optional.  If it is
not provided, the name of the python function will be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.on_sqs_message">
<span class="sig-name descname"><span class="pre">on_sqs_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue_arn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_batching_window_in_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.on_sqs_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a lambda function and configure it to be automatically invoked
whenever a message is published to the specified SQS queue.</p>
<p>The lambda function must accept a single parameter which
is of type <a class="reference internal" href="#SQSEvent" title="SQSEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">SQSEvent</span></code></a>.</p>
<p>If the decorated function returns without raising any exceptions
then Lambda will automatically delete the SQS messages associated
with the <a class="reference internal" href="#SQSEvent" title="SQSEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">SQSEvent</span></code></a>.  You don’t need to manually delete
messages.  If any exception is raised, Lambda won’t delete any messages,
and the messages will become available once the visibility timeout
has been reached.  Note that for batch sizes of more than one, either
the entire batch succeeds and all the messages in the batch are
deleted by Lambda, or the entire batch fails.  The default batch size
is 1.  See the
<a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/with-sqs.html">Using AWS Lambda with Amazon SQS</a>
for more information on how Lambda integrates with SQS.</p>
<p>See the <a class="reference internal" href="topics/events.html#sqs-events"><span class="std std-ref">SQS Events</span></a> topic guide for more information on using SQS
in Chalice.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">on_sqs_message</span><span class="p">(</span><span class="n">queue</span><span class="o">=</span><span class="s1">&#39;myqueue&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Event: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>
        <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Message body: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queue</strong> – The name of the SQS queue you want to subscribe to.
This is the name of the queue, not the ARN or Queue URL.</p></li>
<li><p><strong>batch_size</strong> – The maximum number of messages to retrieve
when polling for SQS messages.  The event parameter can have
multiple SQS messages associated with it.  This is why the
event parameter passed to the lambda function is iterable.  The
batch size controls how many messages can be in a single event.</p></li>
<li><p><strong>name</strong> – The name of the function to use.  This name is combined
with the chalice app name as well as the stage name to create the
entire lambda function name.  This parameter is optional.  If it is
not provided, the name of the python function will be used.</p></li>
<li><p><strong>queue_arn</strong> – The ARN of the SQS queue you want to subscribe to.
This argument is mutually exclusive with the <code class="docutils literal notranslate"><span class="pre">queue</span></code> parameter.
This is useful if you already know the exact ARN or when integrating
with the AWS CDK to create your SQS queue.</p></li>
<li><p><strong>maximum_batching_window_in_seconds</strong> – The maximum amount of time,
in seconds, to gather records before invoking the function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.on_kinesis_record">
<span class="sig-name descname"><span class="pre">on_kinesis_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LATEST'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_batching_window_in_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.on_kinesis_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a lambda function and configure it to be automatically invoked
whenever data is published to the specified Kinesis stream.</p>
<p>The lambda function must accept a single parameter which
is of type <a class="reference internal" href="#KinesisEvent" title="KinesisEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">KinesisEvent</span></code></a>.</p>
<p>If the decorated function raises an exception, Lambda retries the
batch until processing succeeds or the data expires.</p>
<p>See
<a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/with-kinesis.html">Using AWS Lambda with Amazon Kinesis</a>
for more information on how Lambda integrates with Kinesis.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">on_kinesis_record</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="s1">&#39;mystream&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Event: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>
        <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Message body: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> – The name of the Kinesis stream you want to subscribe to.
This is the name of the data stream, not the ARN.</p></li>
<li><p><strong>batch_size</strong> – The maximum number of messages to retrieve
when polling for Kinesis messages.  The event parameter can have
multiple Kinesis records associated with it.  This is why the
event parameter passed to the lambda function is iterable.  The
batch size controls how many messages can be in a single event.</p></li>
<li><p><strong>starting_position</strong> – <p>Specifies where to start processing records.
This can have the following values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LATEST</span></code> - Process new records that are added to the stream.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TRIM_HORIZON</span></code> - Process all records in the stream.</p></li>
</ul>
</p></li>
<li><p><strong>name</strong> – The name of the function to use.  This name is combined
with the chalice app name as well as the stage name to create the
entire lambda function name.  This parameter is optional.  If it is
not provided, the name of the python function will be used.</p></li>
<li><p><strong>maximum_batching_window_in_seconds</strong> – The maximum amount of time,
in seconds, to gather records before invoking the function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.on_dynamodb_record">
<span class="sig-name descname"><span class="pre">on_dynamodb_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream_arn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LATEST'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_batching_window_in_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.on_dynamodb_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a lambda function and configure it to be automatically invoked
whenever data is written to a DynamoDB stream.</p>
<p>The lambda function must accept a single parameter which
is of type <a class="reference internal" href="#DynamoDBEvent" title="DynamoDBEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamoDBEvent</span></code></a>.</p>
<p>If the decorated function raises an exception, Lambda retries the
batch until processing succeeds or the data expires.</p>
<p>See
<a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/with-ddb.html">Using AWS Lambda with Amazon DynamoDB</a>
for more information on how Lambda integrates with DynamoDB Streams.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">on_dynamodb_record</span><span class="p">(</span><span class="n">stream_arn</span><span class="o">=</span><span class="s1">&#39;arn:aws:dynamodb:...:stream&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Event: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>
        <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;New: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">new_image</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream_arn</strong> – The name of the DynamoDB stream ARN you want to
subscribe to.  Note that, unlike other event handlers that accept
the resource name, you must provide the stream ARN when subscribing
to the DynamoDB stream ARN.</p></li>
<li><p><strong>batch_size</strong> – The maximum number of messages to retrieve
when polling for DynamoDB messages.  The event parameter can have
multiple DynamoDB records associated with it.  This is why the
event parameter passed to the lambda function is iterable.  The
batch size controls how many messages can be in a single event.</p></li>
<li><p><strong>starting_position</strong> – <p>Specifies where to start processing records.
This can have the following values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LATEST</span></code> - Process new records that are added to the stream.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TRIM_HORIZON</span></code> - Process all records in the stream.</p></li>
</ul>
</p></li>
<li><p><strong>name</strong> – The name of the function to use.  This name is combined
with the chalice app name as well as the stage name to create the
entire lambda function name.  This parameter is optional.  If it is
not provided, the name of the python function will be used.</p></li>
<li><p><strong>maximum_batching_window_in_seconds</strong> – The maximum amount of time,
in seconds, to gather records before invoking the function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.lambda_function">
<span class="sig-name descname"><span class="pre">lambda_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.lambda_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pure lambda function that’s not connected to anything.</p>
<p>See <a class="reference internal" href="topics/purelambda.html"><span class="doc">Pure Lambda Functions</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the function to use.  This name is combined
with the chalice app name as well as the stage name to create the
entire lambda function name.  This parameter is optional.  If it is
not provided, the name of the python function will be used.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.register_blueprint">
<span class="sig-name descname"><span class="pre">register_blueprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blueprint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.register_blueprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a <a class="reference internal" href="#Blueprint" title="Blueprint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blueprint</span></code></a> to a Chalice app.
See <a class="reference internal" href="topics/blueprints.html"><span class="doc">Blueprints</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blueprint</strong> – The <a class="reference internal" href="#Blueprint" title="Blueprint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blueprint</span></code></a> to register to the app.</p></li>
<li><p><strong>name_prefix</strong> – An optional name prefix that’s added to all the
resources specified in the blueprint.</p></li>
<li><p><strong>url_prefix</strong> – An optional url prefix that’s added to all the
routes defined the Blueprint.  This allows you to set the root mount
point for all URLs in a Blueprint.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.on_ws_connect">
<span class="sig-name descname"><span class="pre">on_ws_connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.on_ws_connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Websocket API connect event handler.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – The <a class="reference internal" href="#WebsocketEvent" title="WebsocketEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketEvent</span></code></a> received to indicate a new
connection has been registered with API Gateway. The identifier of this
connection is under the <a class="reference internal" href="#WebsocketEvent.connection_id" title="WebsocketEvent.connection_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">WebsocketEvent.connection_id</span></code></a> attribute.</p>
</dd>
</dl>
<p>see <a class="reference internal" href="topics/websockets.html"><span class="doc">Websockets</span></a> for more information.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.on_ws_message">
<span class="sig-name descname"><span class="pre">on_ws_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.on_ws_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Websocket API message event handler.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – The <a class="reference internal" href="#WebsocketEvent" title="WebsocketEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketEvent</span></code></a> received to indicate API Gateway
received a message from a connected client. The identifier of the
client that sent the message is under the
<a class="reference internal" href="#WebsocketEvent.connection_id" title="WebsocketEvent.connection_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">WebsocketEvent.connection_id</span></code></a> attribute. The content of the
message is available in the <a class="reference internal" href="#WebsocketEvent.body" title="WebsocketEvent.body"><code class="xref py py-attr docutils literal notranslate"><span class="pre">WebsocketEvent.body</span></code></a> attribute.</p>
</dd>
</dl>
<p>see <a class="reference internal" href="topics/websockets.html"><span class="doc">Websockets</span></a> for more information.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.on_ws_disconnect">
<span class="sig-name descname"><span class="pre">on_ws_disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.on_ws_disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Websocket API disconnect event handler.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – The <a class="reference internal" href="#WebsocketEvent" title="WebsocketEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketEvent</span></code></a> received to indicate an existing
connection has been disconnected from API Gateway. The identifier of this
connection is under the <a class="reference internal" href="#WebsocketEvent.connection_id" title="WebsocketEvent.connection_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">WebsocketEvent.connection_id</span></code></a> attribute.</p>
</dd>
</dl>
<p>see <a class="reference internal" href="topics/websockets.html"><span class="doc">Websockets</span></a> for more information.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.middleware">
<span class="sig-name descname"><span class="pre">middleware</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.middleware" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a middleware with a Chalice application.
This decorator will register a function as Chalice middleware, which
will be automatically invoked as part of the request/response cycle for
a Lambda invocation.  You can provide the <code class="docutils literal notranslate"><span class="pre">event_type</span></code> argument to
indicate what type of lambda events you want to register with.  The
default value, <code class="docutils literal notranslate"><span class="pre">all</span></code>, indicates that the middleware will be called
for all Lambda functions defined in your Chalice app.  Supported
values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code> - <code class="docutils literal notranslate"><span class="pre">Any</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3</span></code> - <a class="reference internal" href="#S3Event" title="S3Event"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3Event</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sns</span></code> - <a class="reference internal" href="#SNSEvent" title="SNSEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">SNSEvent</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqs</span></code> - <a class="reference internal" href="#SQSEvent" title="SQSEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">SQSEvent</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cloudwatch</span></code> - <a class="reference internal" href="#CloudWatchEvent" title="CloudWatchEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">CloudWatchEvent</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scheduled</span></code> - <a class="reference internal" href="#CloudWatchEvent" title="CloudWatchEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">CloudWatchEvent</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">websocket</span></code> - <a class="reference internal" href="#WebsocketEvent" title="WebsocketEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketEvent</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">http</span></code> - <a class="reference internal" href="#Request" title="Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pure_lambda</span></code> - <a class="reference internal" href="#LambdaFunctionEvent" title="LambdaFunctionEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">LambdaFunctionEvent</span></code></a></p></li>
</ul>
<p>The decorated function must accept two arguments, <code class="docutils literal notranslate"><span class="pre">event</span></code> and
<code class="docutils literal notranslate"><span class="pre">get_response</span></code>.  The <code class="docutils literal notranslate"><span class="pre">event</span></code> is the input event associated with
the Lambda invocation, and <code class="docutils literal notranslate"><span class="pre">get_response</span></code> is a callable that takes
an input event and will invoke the next middleware in the chain,
and eventually the original Lambda handler.  Below is a noop middleware
that shows the minimum needed to write middleware:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">middleware</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">mymiddleware</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">get_response</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">get_response</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="topics/middleware.html"><span class="doc">Middleware</span></a> for more information on writing middleware.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Chalice.register_middleware">
<span class="sig-name descname"><span class="pre">register_middleware</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Chalice.register_middleware" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a middleware with a Chalice application.  This is the same
behavior as the <a class="reference internal" href="#Chalice.middleware" title="Chalice.middleware"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Chalice.middleware()</span></code></a> decorator and is useful
if you want to register middleware for pre-existing functions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">thirdparty</span>

<span class="n">app</span><span class="o">.</span><span class="n">register_middleware</span><span class="p">(</span><span class="n">thirdparty</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ConvertToMiddleware">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ConvertToMiddleware</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lambda_wrapper</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ConvertToMiddleware" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is used to convert a function that wraps/proxies a Lambda
function into middleware.  This allows this wrapper to automatically
be applied to every function in your app.  For example, if you had the
following logging decorator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">log_invocation</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Before lambda function.&quot;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;After lambda function.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">lambda_function</span><span class="p">()</span>
<span class="nd">@log_invocation</span>
<span class="k">def</span> <span class="nf">myfunction</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;In myfunction().&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Rather than decorate every Lambda function with the <code class="docutils literal notranslate"><span class="pre">&#64;log_invocation</span></code>
decorator, you can instead use <code class="docutils literal notranslate"><span class="pre">ConvertToMiddleware</span></code> to automatically
apply this wrapper to every Lambda function in your app.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">register_middleware</span><span class="p">(</span><span class="n">ConvertToMiddleware</span><span class="p">(</span><span class="n">log_invoation</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="request">
<h1>Request<a class="headerlink" href="#request" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="Request">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Request</span></span><a class="headerlink" href="#Request" title="Permalink to this definition">¶</a></dt>
<dd><p>A class that represents the current request.  This is mapped to
the <code class="docutils literal notranslate"><span class="pre">app.current_request</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/objects/</span><span class="si">{key}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;PUT&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">myobject</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">current_request</span>  <span class="c1"># type: Request</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;PUT&#39;</span><span class="p">:</span>
        <span class="c1"># handle PUT request</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
        <span class="c1"># handle GET request</span>
        <span class="k">pass</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="Request.path">
<span class="sig-name descname"><span class="pre">path</span></span><a class="headerlink" href="#Request.path" title="Permalink to this definition">¶</a></dt>
<dd><p>The path of the HTTP request.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Request.query_params">
<span class="sig-name descname"><span class="pre">query_params</span></span><a class="headerlink" href="#Request.query_params" title="Permalink to this definition">¶</a></dt>
<dd><p>A MultiDict of the query params for the request.  This value is <code class="docutils literal notranslate"><span class="pre">None</span></code>
if no query params were provided in the request. The MultiDict acts like a
normal dictionary except that you can call the method <code class="docutils literal notranslate"><span class="pre">getlist()</span></code> to get
multiple keys from the same query string parameter</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">current_request</span>
<span class="c1"># Raises an exception if key doesn&#39;t exist, usual Python behavior.</span>
<span class="n">single_param</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="p">[</span><span class="s1">&#39;single&#39;</span><span class="p">]</span>

<span class="c1"># None if key doesn&#39;t exist, usual Python behavior</span>
<span class="n">another_param</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;another_param&#39;</span><span class="p">)</span>

<span class="c1"># A List of all parameters named multi_param, Throws an exception if</span>
<span class="c1"># key doesn&#39;t exist</span>
<span class="n">multi_param_list</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;multi_param&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Request.headers">
<span class="sig-name descname"><span class="pre">headers</span></span><a class="headerlink" href="#Request.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of the request headers.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Request.uri_params">
<span class="sig-name descname"><span class="pre">uri_params</span></span><a class="headerlink" href="#Request.uri_params" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of the captured URI params.  This value is <code class="docutils literal notranslate"><span class="pre">None</span></code> if no
URI params were provided in the request.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Request.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#Request.method" title="Permalink to this definition">¶</a></dt>
<dd><p>The HTTP method as a string.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Request.json_body">
<span class="sig-name descname"><span class="pre">json_body</span></span><a class="headerlink" href="#Request.json_body" title="Permalink to this definition">¶</a></dt>
<dd><p>The parsed JSON body (<code class="docutils literal notranslate"><span class="pre">json.loads(raw_body)</span></code>).  This value will only
be non-None if the Content-Type header is <code class="docutils literal notranslate"><span class="pre">application/json</span></code>, which
is the default content type value in chalice.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Request.raw_body">
<span class="sig-name descname"><span class="pre">raw_body</span></span><a class="headerlink" href="#Request.raw_body" title="Permalink to this definition">¶</a></dt>
<dd><p>The raw HTTP body as bytes.  This is useful if you need to
calculate a checksum of the HTTP body.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Request.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#Request.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of additional context information.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Request.stage_vars">
<span class="sig-name descname"><span class="pre">stage_vars</span></span><a class="headerlink" href="#Request.stage_vars" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>A dict of configuration for the API Gateway stage.</p>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="Request.lambda_context">
<span class="sig-name descname"><span class="pre">lambda_context</span></span><a class="headerlink" href="#Request.lambda_context" title="Permalink to this definition">¶</a></dt>
<dd><p>A Lambda context object that is passed to the invoked view by AWS
Lambda. You can find out more about this object by reading the
<a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">lambda context object documentation</a>.</p>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Request.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Request.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the <a class="reference internal" href="#Request" title="Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> object to a dictionary.  This is useful
for debugging purposes.  This dictionary is guaranteed to be JSON
serializable so you can return this value from a chalice view.</p>
</dd></dl>

</dd></dl>

</section>
<section id="response">
<h1>Response<a class="headerlink" href="#response" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="Response">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">body</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Response" title="Permalink to this definition">¶</a></dt>
<dd><p>A class that represents the response for the view function.  You
can optionally return an instance of this class from a view function if you
want complete control over the returned HTTP response.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span><span class="p">,</span> <span class="n">Response</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s1">&#39;custom-response&#39;</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="s1">&#39;hello world!&#39;</span><span class="p">,</span>
                    <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
                    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">})</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.0.</span></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="Response.body">
<span class="sig-name descname"><span class="pre">body</span></span><a class="headerlink" href="#Response.body" title="Permalink to this definition">¶</a></dt>
<dd><p>The HTTP response body to send back.  This value must be a string.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Response.headers">
<span class="sig-name descname"><span class="pre">headers</span></span><a class="headerlink" href="#Response.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional dictionary of HTTP headers to send back.  This is a dictionary
of header name to header value, e.g <code class="docutils literal notranslate"><span class="pre">{'Content-Type':</span> <span class="pre">'text/plain'}</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Response.status_code">
<span class="sig-name descname"><span class="pre">status_code</span></span><a class="headerlink" href="#Response.status_code" title="Permalink to this definition">¶</a></dt>
<dd><p>The integer HTTP status code to send back in the HTTP response.</p>
</dd></dl>

</dd></dl>

</section>
<section id="authorization">
<h1>Authorization<a class="headerlink" href="#authorization" title="Permalink to this headline">¶</a></h1>
<p>Each of these classes below can be provided using the <code class="docutils literal notranslate"><span class="pre">authorizer</span></code> argument
for an <code class="docutils literal notranslate"><span class="pre">&#64;app.route(authorizer=...)</span></code> call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">authorizer</span> <span class="o">=</span> <span class="n">CognitoUserPoolAuthorizer</span><span class="p">(</span>
    <span class="s1">&#39;MyPool&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;Authorization&#39;</span><span class="p">,</span>
    <span class="n">provider_arns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;arn:aws:cognito:...:userpool/name&#39;</span><span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/user-pools&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">],</span> <span class="n">authorizer</span><span class="o">=</span><span class="n">authorizer</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">authenticated</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;secure&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="CognitoUserPoolAuthorizer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CognitoUserPoolAuthorizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">provider_arns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Authorization'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CognitoUserPoolAuthorizer" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.8.1.</span></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="CognitoUserPoolAuthorizer.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#CognitoUserPoolAuthorizer.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the authorizer.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CognitoUserPoolAuthorizer.provider_arns">
<span class="sig-name descname"><span class="pre">provider_arns</span></span><a class="headerlink" href="#CognitoUserPoolAuthorizer.provider_arns" title="Permalink to this definition">¶</a></dt>
<dd><p>The Cognito User Pool arns to use.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CognitoUserPoolAuthorizer.header">
<span class="sig-name descname"><span class="pre">header</span></span><a class="headerlink" href="#CognitoUserPoolAuthorizer.header" title="Permalink to this definition">¶</a></dt>
<dd><p>The header where the auth token will be specified.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="IAMAuthorizer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">IAMAuthorizer</span></span><a class="headerlink" href="#IAMAuthorizer" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.8.3.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CustomAuthorizer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CustomAuthorizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">authorizer_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ttl_seconds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Authorization'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CustomAuthorizer" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.8.1.</span></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="CustomAuthorizer.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#CustomAuthorizer.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the authorizer.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CustomAuthorizer.authorizer_uri">
<span class="sig-name descname"><span class="pre">authorizer_uri</span></span><a class="headerlink" href="#CustomAuthorizer.authorizer_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>The URI of the lambda function to use for the custom authorizer.  This
usually has the form
<code class="docutils literal notranslate"><span class="pre">arn:aws:apigateway:{region}:lambda:path/2015-03-31/functions/{lambda_arn}/invocations</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CustomAuthorizer.ttl_seconds">
<span class="sig-name descname"><span class="pre">ttl_seconds</span></span><a class="headerlink" href="#CustomAuthorizer.ttl_seconds" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of seconds to cache the returned policy from a custom
authorizer.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CustomAuthorizer.header">
<span class="sig-name descname"><span class="pre">header</span></span><a class="headerlink" href="#CustomAuthorizer.header" title="Permalink to this definition">¶</a></dt>
<dd><p>The header where the auth token will be specified.</p>
</dd></dl>

</dd></dl>

<section id="built-in-authorizers">
<h2>Built-in Authorizers<a class="headerlink" href="#built-in-authorizers" title="Permalink to this headline">¶</a></h2>
<p>These classes are used when defining built-in authorizers in Chalice.</p>
<dl class="py class">
<dt class="sig sig-object py" id="AuthRequest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AuthRequest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">auth_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method_arn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#AuthRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of this class is passed as the first argument
to an authorizer defined via <code class="docutils literal notranslate"><span class="pre">&#64;app.authorizer()</span></code>.  You
generally do not instantiate this class directly.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="AuthRequest.auth_type">
<span class="sig-name descname"><span class="pre">auth_type</span></span><a class="headerlink" href="#AuthRequest.auth_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of authentication</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="AuthRequest.token">
<span class="sig-name descname"><span class="pre">token</span></span><a class="headerlink" href="#AuthRequest.token" title="Permalink to this definition">¶</a></dt>
<dd><p>The authorization token.  This is usually the value of the
<code class="docutils literal notranslate"><span class="pre">Authorization</span></code> header.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="AuthRequest.method_arn">
<span class="sig-name descname"><span class="pre">method_arn</span></span><a class="headerlink" href="#AuthRequest.method_arn" title="Permalink to this definition">¶</a></dt>
<dd><p>The ARN of the API gateway being authorized.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="AuthResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AuthResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">routes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">principal_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#AuthResponse" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="AuthResponse.routes">
<span class="sig-name descname"><span class="pre">routes</span></span><a class="headerlink" href="#AuthResponse.routes" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of authorized routes.  Each element in the list
can either by a string route such as <cite>“/foo/bar”</cite> or
an instance of <code class="docutils literal notranslate"><span class="pre">AuthRoute</span></code>.  If you specify the URL as
a string, then all supported HTTP methods will be authorized.
If you want to specify which HTTP methods are allowed, you
can use <code class="docutils literal notranslate"><span class="pre">AuthRoute</span></code>.  If you want to specify that all
routes and HTTP methods are supported you can use the
wildcard value of <code class="docutils literal notranslate"><span class="pre">&quot;*&quot;</span></code>: <code class="docutils literal notranslate"><span class="pre">AuthResponse(routes=['*'],</span> <span class="pre">...)</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="AuthResponse.principal_id">
<span class="sig-name descname"><span class="pre">principal_id</span></span><a class="headerlink" href="#AuthResponse.principal_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The principal id of the user.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="AuthResponse.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#AuthResponse.context" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional dictionary of key value pairs.  This dictionary
will be accessible in the <code class="docutils literal notranslate"><span class="pre">app.current_request.context</span></code>
in all subsequent authorized requests for this user.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="AuthRoute">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AuthRoute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">methods</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#AuthRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>This class be used in the <code class="docutils literal notranslate"><span class="pre">routes</span></code> attribute of a
<a class="reference internal" href="#AuthResponse" title="AuthResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">AuthResponse</span></code></a> instance to get fine grained control
over which HTTP methods are allowed for a given route.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="AuthRoute.path">
<span class="sig-name descname"><span class="pre">path</span></span><a class="headerlink" href="#AuthRoute.path" title="Permalink to this definition">¶</a></dt>
<dd><p>The allowed route specified as a string</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="AuthRoute.methods">
<span class="sig-name descname"><span class="pre">methods</span></span><a class="headerlink" href="#AuthRoute.methods" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of allowed HTTP methods.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="apigateway">
<h1>APIGateway<a class="headerlink" href="#apigateway" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="APIGateway">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">APIGateway</span></span><a class="headerlink" href="#APIGateway" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is used to control
how API Gateway interprets <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> headers in both requests and
responses.</p>
<p>There is a single instance of this class attached to each
<a class="reference internal" href="#Chalice" title="Chalice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Chalice</span></code></a> object under the <code class="docutils literal notranslate"><span class="pre">api</span></code> attribute.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="APIGateway.cors">
<span class="sig-name descname"><span class="pre">cors</span></span><a class="headerlink" href="#APIGateway.cors" title="Permalink to this definition">¶</a></dt>
<dd><p>Global cors configuration. If a route-level cors configuration is not
provided, or is <code class="docutils literal notranslate"><span class="pre">None</span></code> then this configuration will be used. By
default it is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>. This can either be <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code>,
or an instance of the <code class="docutils literal notranslate"><span class="pre">CORSConfig</span></code> class. This makes it easy to enable
CORS for your entire application by setting <code class="docutils literal notranslate"><span class="pre">app.api.cors</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.12.1.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="APIGateway.default_binary_types">
<span class="sig-name descname"><span class="pre">default_binary_types</span></span><a class="headerlink" href="#APIGateway.default_binary_types" title="Permalink to this definition">¶</a></dt>
<dd><p>The value of <code class="docutils literal notranslate"><span class="pre">default_binary_types</span></code> are the <code class="docutils literal notranslate"><span class="pre">Content-Types</span></code> that are
considered binary by default. This value should not be changed, instead
you should modify the <code class="docutils literal notranslate"><span class="pre">binary_types</span></code> list to change the behavior of a
content type. Its value is: <code class="docutils literal notranslate"><span class="pre">application/octet-stream</span></code>,
<code class="docutils literal notranslate"><span class="pre">application/x-tar</span></code>, <code class="docutils literal notranslate"><span class="pre">application/zip</span></code>, <code class="docutils literal notranslate"><span class="pre">audio/basic</span></code>,
<code class="docutils literal notranslate"><span class="pre">audio/ogg</span></code>, <code class="docutils literal notranslate"><span class="pre">audio/mp4</span></code>, <code class="docutils literal notranslate"><span class="pre">audio/mpeg</span></code>, <code class="docutils literal notranslate"><span class="pre">audio/wav</span></code>,
<code class="docutils literal notranslate"><span class="pre">audio/webm</span></code>, <code class="docutils literal notranslate"><span class="pre">image/png</span></code>, <code class="docutils literal notranslate"><span class="pre">image/jpg</span></code>, <code class="docutils literal notranslate"><span class="pre">image/jpeg</span></code>,
<code class="docutils literal notranslate"><span class="pre">image/gif</span></code>, <code class="docutils literal notranslate"><span class="pre">video/ogg</span></code>, <code class="docutils literal notranslate"><span class="pre">video/mpeg</span></code>, <code class="docutils literal notranslate"><span class="pre">video/webm</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="APIGateway.binary_types">
<span class="sig-name descname"><span class="pre">binary_types</span></span><a class="headerlink" href="#APIGateway.binary_types" title="Permalink to this definition">¶</a></dt>
<dd><p>The value of <code class="docutils literal notranslate"><span class="pre">binary_types</span></code> controls how API Gateway interprets
requests and responses as detailed below.</p>
<p>If an incoming request has a <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header value that is
present in the <code class="docutils literal notranslate"><span class="pre">binary_types</span></code> list it will be assumed that its body is
a sequence of raw bytes. You can access these bytes by accessing the
<code class="docutils literal notranslate"><span class="pre">app.current_request.raw_body</span></code> property.</p>
<p>If an outgoing response from <code class="docutils literal notranslate"><span class="pre">Chalice</span></code> has a header <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code>
that matches one of the <code class="docutils literal notranslate"><span class="pre">binary_types</span></code> its body must be a <code class="docutils literal notranslate"><span class="pre">bytes</span></code>
type object. It is important to note that originating request must have
the <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header for the same type as the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> on the
response. Otherwise a <code class="docutils literal notranslate"><span class="pre">400</span></code> error will be returned.</p>
<p>This value can be modified to change what types API Gateway treats as
binary. The easiest way to do this is to simply append new types to
the list.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">binary_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;application/my-binary-data&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Keep in mind that there can only be a total of 25 binary types at a time
and Chalice by default has a list of 16 types. It is recommended if you
are going to make extensive use of binary types to reset the list to
the exact set of content types you will be using. This can easily be
done by reassigning the whole list.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">binary_types</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;application/octet-stream&#39;</span><span class="p">,</span>
    <span class="s1">&#39;application/my-binary-data&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Implementation Note</strong>: API Gateway and Lambda communicate through a
JSON event which is encoded using <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code>. The raw bytes are
temporarily encoded using base64 when being passed between API Gateway
and Lambda. In the worst case this encoding can cause the binary body
to be inflated up to <code class="docutils literal notranslate"><span class="pre">4/3</span></code> its original size. Lambda only accepts an
event up to <code class="docutils literal notranslate"><span class="pre">6mb</span></code>, which means even if your binary data was not quite
at that limit, with the base64 encoding it may exceed that limit. This
will manifest as a <code class="docutils literal notranslate"><span class="pre">502</span></code> Bad Gateway error.</p>
</dd></dl>

</dd></dl>

</section>
<section id="websocketapi">
<h1>WebsocketAPI<a class="headerlink" href="#websocketapi" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="WebsocketAPI">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">WebsocketAPI</span></span><a class="headerlink" href="#WebsocketAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is used to send messages to websocket clients connected to an API
Gateway Websocket API.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="WebsocketAPI.session">
<span class="sig-name descname"><span class="pre">session</span></span><a class="headerlink" href="#WebsocketAPI.session" title="Permalink to this definition">¶</a></dt>
<dd><p>A boto3 Session that will be used to send websocket messages to
clients. Any custom configuration can be set through a botocore
<code class="docutils literal notranslate"><span class="pre">session</span></code>. This <strong>must</strong> be manually set before websocket features can
be used.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">botocore</span>
<span class="kn">from</span> <span class="nn">boto3.session</span> <span class="kn">import</span> <span class="n">Session</span>
<span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="s1">&#39;example&#39;</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">botocore</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">set_config_variable</span><span class="p">(</span><span class="s1">&#39;retries&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;max_attempts&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
<span class="n">app</span><span class="o">.</span><span class="n">websocket_api</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">botocore_session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WebsocketAPI.configure">
<span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WebsocketAPI.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure prepares the <a class="reference internal" href="#WebsocketAPI" title="WebsocketAPI"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketAPI</span></code></a> to call the <a class="reference internal" href="#send" title="send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a>
method. Without first calling this method calls to <a class="reference internal" href="#send" title="send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a> will fail
with the message <code class="docutils literal notranslate"><span class="pre">WebsocketAPI</span> <span class="pre">needs</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">configured</span> <span class="pre">before</span> <span class="pre">sending</span>
<span class="pre">messages.</span></code>. This is because a boto3 <code class="docutils literal notranslate"><span class="pre">apigatewaymanagementapi</span></code> client
must be created from the <a class="reference internal" href="#WebsocketAPI.session" title="WebsocketAPI.session"><code class="xref py py-attr docutils literal notranslate"><span class="pre">session</span></code></a> with a custom endpoint in order
to properly communicate with our API Gateway WebsocketAPI. This method is
called on your behalf before each of the websocket handlers:
<code class="docutils literal notranslate"><span class="pre">on_ws_connect</span></code>, <code class="docutils literal notranslate"><span class="pre">on_ws_message</span></code>, <code class="docutils literal notranslate"><span class="pre">on_ws_disconnect</span></code>. This ensures
that the <a class="reference internal" href="#send" title="send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a> method is available in each of those handlers.</p>
</dd></dl>

</dd></dl>

<blockquote id="websocket-send">
<div><dl class="py method">
<dt class="sig sig-object py" id="send">
<span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#send" title="Permalink to this definition">¶</a></dt>
<dd><p><em>requires</em> <code class="docutils literal notranslate"><span class="pre">boto3&gt;=1.9.91</span></code></p>
<p>Method to send a message to a client. The <code class="docutils literal notranslate"><span class="pre">connection_id</span></code> is the unique
identifier of the socket to send the <code class="docutils literal notranslate"><span class="pre">message</span></code> to. The <code class="docutils literal notranslate"><span class="pre">message</span></code> must
be a utf-8 string.</p>
<p>If the socket is disconnected it raises a <a class="reference internal" href="#WebsocketDisconnectedError" title="WebsocketDisconnectedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketDisconnectedError</span></code></a>
error.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#close" title="Permalink to this definition">¶</a></dt>
<dd><p><em>requires</em> <code class="docutils literal notranslate"><span class="pre">boto3&gt;=1.9.221</span></code></p>
<p>Method to close a WebSocket connection. The <code class="docutils literal notranslate"><span class="pre">connection_id</span></code> is the
unique identifier of the socket to close.</p>
<p>If the socket is already disconnected it raises a
<a class="reference internal" href="#WebsocketDisconnectedError" title="WebsocketDisconnectedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketDisconnectedError</span></code></a> error.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="info">
<span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#info" title="Permalink to this definition">¶</a></dt>
<dd><p><em>requires</em> <code class="docutils literal notranslate"><span class="pre">boto3&gt;=1.9.221</span></code></p>
<p>Method to get info about a WebSocket. The <code class="docutils literal notranslate"><span class="pre">connection_id</span></code> is the unique
identifier of the socket to get info about.</p>
<p>The following is an example of the format this method returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;ConnectedAt&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="s1">&#39;Identity&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;SourceIp&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
        <span class="s1">&#39;UserAgent&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span>
    <span class="p">},</span>
    <span class="s1">&#39;LastActiveAt&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the socket is disconnected it raises a <a class="reference internal" href="#WebsocketDisconnectedError" title="WebsocketDisconnectedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketDisconnectedError</span></code></a>
error.</p>
</dd></dl>

</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="WebsocketDisconnectedError">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">WebsocketDisconnectedError</span></span><a class="headerlink" href="#WebsocketDisconnectedError" title="Permalink to this definition">¶</a></dt>
<dd><p>An exception raised when a message is sent to a websocket that has disconnected.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="WebsocketDisconnectedError.connection_id">
<span class="sig-name descname"><span class="pre">connection_id</span></span><a class="headerlink" href="#WebsocketDisconnectedError.connection_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The unique identifier of the websocket that was disconnected.</p>
</dd></dl>

</dd></dl>

</section>
<section id="cors">
<h1>CORS<a class="headerlink" href="#cors" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="CORSConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CORSConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">allow_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expose_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_age</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_credentials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CORSConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>CORS configuration to attach to a route, or globally on <code class="docutils literal notranslate"><span class="pre">app.api.cors</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">CORSConfig</span>
<span class="n">cors_config</span> <span class="o">=</span> <span class="n">CORSConfig</span><span class="p">(</span>
    <span class="n">allow_origin</span><span class="o">=</span><span class="s1">&#39;https://foo.example.com&#39;</span><span class="p">,</span>
    <span class="n">allow_headers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;X-Special-Header&#39;</span><span class="p">],</span>
    <span class="n">max_age</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
    <span class="n">expose_headers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;X-Special-Header&#39;</span><span class="p">],</span>
    <span class="n">allow_credentials</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/custom_cors&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">],</span> <span class="n">cors</span><span class="o">=</span><span class="n">cors_config</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">supports_custom_cors</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;cors&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.8.1.</span></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="CORSConfig.allow_origin">
<span class="sig-name descname"><span class="pre">allow_origin</span></span><a class="headerlink" href="#CORSConfig.allow_origin" title="Permalink to this definition">¶</a></dt>
<dd><p>The value of the <code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Origin</span></code> to send in the response.
Keep in mind that even though the <code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Origin</span></code> header
can be set to a string that is a space separated list of origins, this
behavior does not work on all clients that implement CORS. You should only
supply a single origin to the <code class="docutils literal notranslate"><span class="pre">CORSConfig</span></code> object. If you need to supply
multiple origins you will need to define a custom handler for it that
accepts <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> requests and matches the <code class="docutils literal notranslate"><span class="pre">Origin</span></code> header against a
whitelist of origins.  If the match is successful then return just their
<code class="docutils literal notranslate"><span class="pre">Origin</span></code> back to them in the <code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Origin</span></code> header.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CORSConfig.allow_headers">
<span class="sig-name descname"><span class="pre">allow_headers</span></span><a class="headerlink" href="#CORSConfig.allow_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of additional allowed headers.  This list is added to list of
built in allowed headers: <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code>, <code class="docutils literal notranslate"><span class="pre">X-Amz-Date</span></code>,
<code class="docutils literal notranslate"><span class="pre">Authorization</span></code>, <code class="docutils literal notranslate"><span class="pre">X-Api-Key</span></code>, <code class="docutils literal notranslate"><span class="pre">X-Amz-Security-Token</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CORSConfig.expose_headers">
<span class="sig-name descname"><span class="pre">expose_headers</span></span><a class="headerlink" href="#CORSConfig.expose_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of values to return for the <code class="docutils literal notranslate"><span class="pre">Access-Control-Expose-Headers</span></code>:</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CORSConfig.max_age">
<span class="sig-name descname"><span class="pre">max_age</span></span><a class="headerlink" href="#CORSConfig.max_age" title="Permalink to this definition">¶</a></dt>
<dd><p>The value for the <code class="docutils literal notranslate"><span class="pre">Access-Control-Max-Age</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CORSConfig.allow_credentials">
<span class="sig-name descname"><span class="pre">allow_credentials</span></span><a class="headerlink" href="#CORSConfig.allow_credentials" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean value that sets the value of
<code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Credentials</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="event-sources">
<h1>Event Sources<a class="headerlink" href="#event-sources" title="Permalink to this headline">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.0b1.</span></p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="Rate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Rate" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of this class can be used as the <code class="docutils literal notranslate"><span class="pre">expression</span></code> value
in the <a class="reference internal" href="#Chalice.schedule" title="Chalice.schedule"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Chalice.schedule()</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">Rate</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Rate</span><span class="o">.</span><span class="n">MINUTES</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run every minute.</span>
<span class="n">Rate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Rate</span><span class="o">.</span><span class="n">MINUTES</span><span class="p">)</span>

<span class="c1"># Run every 2 hours.</span>
<span class="n">Rate</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Rate</span><span class="o">.</span><span class="n">HOURS</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="Rate.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#Rate.value" title="Permalink to this definition">¶</a></dt>
<dd><p>An integer value that presents the amount of time to wait
between invocations of the scheduled event.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Rate.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><a class="headerlink" href="#Rate.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>The unit of the provided <code class="docutils literal notranslate"><span class="pre">value</span></code> attribute.  This can be
either <code class="docutils literal notranslate"><span class="pre">Rate.MINUTES</span></code>, <code class="docutils literal notranslate"><span class="pre">Rate.HOURS</span></code>, or <code class="docutils literal notranslate"><span class="pre">Rate.DAYS</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">MINUTES,</span> <span class="pre">HOURS,</span> <span class="pre">DAYS</span></span></dt>
<dd><p>These values should be used for the <code class="docutils literal notranslate"><span class="pre">unit</span></code> attribute.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="Cron">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Cron</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">minutes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hours</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day_of_month</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day_of_week</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Cron" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of this class can be used as the <code class="docutils literal notranslate"><span class="pre">expression</span></code> value
in the <a class="reference internal" href="#Chalice.schedule" title="Chalice.schedule"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Chalice.schedule()</span></code></a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">Cron</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;6L&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-2005&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>It provides more capabilities than the <a class="reference internal" href="#Rate" title="Rate"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rate</span></code></a>
class.  There are a few limits:</p>
<ul class="simple">
<li><p>You can’t specify <code class="docutils literal notranslate"><span class="pre">day_of_month</span></code> and <code class="docutils literal notranslate"><span class="pre">day_of_week</span></code> fields in
the same Cron expression.  If you specify a value in one of the
fields, you must use a <code class="docutils literal notranslate"><span class="pre">?</span></code> in the other.</p></li>
<li><p>Cron expressions that lead to rates faster than 1 minute are not
supported.</p></li>
</ul>
<p>For more information, see the API
<a class="reference external" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html#CronExpressions">docs page</a>.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run at 10:00am (UTC) every day.</span>
<span class="n">Cron</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>

<span class="c1"># Run at 12:15pm (UTC) every day.</span>
<span class="n">Cron</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>

<span class="c1"># Run at 06:00pm (UTC) every Monday through Friday.</span>
<span class="n">Cron</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;MON-FRI&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>

<span class="c1"># Run at 08:00am (UTC) every 1st day of the month.</span>
<span class="n">Cron</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>

<span class="c1"># Run every 15 minutes.</span>
<span class="n">Cron</span><span class="p">(</span><span class="s1">&#39;0/15&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>

<span class="c1"># Run every 10 minutes Monday through Friday.</span>
<span class="n">Cron</span><span class="p">(</span><span class="s1">&#39;0/10&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;MON-FRI&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>

<span class="c1"># Run every 5 minutes Monday through Friday between</span>
<span class="c1"># 08:00am and 5:55pm (UTC).</span>
<span class="n">Cron</span><span class="p">(</span><span class="s1">&#39;0/5&#39;</span><span class="p">,</span> <span class="s1">&#39;8-17&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;MON-FRI&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CloudWatchEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CloudWatchEvent</span></span><a class="headerlink" href="#CloudWatchEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the input argument for a scheduled or CloudWatch events.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="s1">&#39;rate(1 hour)&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">every_hour</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">CloudWatchEvent</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>In the code example above, the <code class="docutils literal notranslate"><span class="pre">event</span></code> argument is of
type <code class="docutils literal notranslate"><span class="pre">CloudWatchEvent</span></code>, which will have the following
attributes.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.version">
<span class="sig-name descname"><span class="pre">version</span></span><a class="headerlink" href="#CloudWatchEvent.version" title="Permalink to this definition">¶</a></dt>
<dd><p>By default, this is set to 0 (zero) in all events.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.account">
<span class="sig-name descname"><span class="pre">account</span></span><a class="headerlink" href="#CloudWatchEvent.account" title="Permalink to this definition">¶</a></dt>
<dd><p>The 12-digit number identifying an AWS account.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.region">
<span class="sig-name descname"><span class="pre">region</span></span><a class="headerlink" href="#CloudWatchEvent.region" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies the AWS region where the event originated.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.detail">
<span class="sig-name descname"><span class="pre">detail</span></span><a class="headerlink" href="#CloudWatchEvent.detail" title="Permalink to this definition">¶</a></dt>
<dd><p>For CloudWatch events this will be the event payload.
For scheduled events, this will be an empty dictionary.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.detail_type">
<span class="sig-name descname"><span class="pre">detail_type</span></span><a class="headerlink" href="#CloudWatchEvent.detail_type" title="Permalink to this definition">¶</a></dt>
<dd><p>For scheduled events, this value will be <code class="docutils literal notranslate"><span class="pre">&quot;Scheduled</span> <span class="pre">Event&quot;</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.source">
<span class="sig-name descname"><span class="pre">source</span></span><a class="headerlink" href="#CloudWatchEvent.source" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies the service that sourced the event. All events sourced from
within AWS will begin with “aws.” Customer-generated events can have any
value here as long as it doesn’t begin with “aws.” We recommend the use
of java package-name style reverse domain-name strings.</p>
<p>For scheduled events, this will be <code class="docutils literal notranslate"><span class="pre">aws.events</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.time">
<span class="sig-name descname"><span class="pre">time</span></span><a class="headerlink" href="#CloudWatchEvent.time" title="Permalink to this definition">¶</a></dt>
<dd><p>The event timestamp, which can be specified by the service originating
the event. If the event spans a time interval, the service might choose
to report the start time, so this value can be noticeably before the time
the event is actually received.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.event_id">
<span class="sig-name descname"><span class="pre">event_id</span></span><a class="headerlink" href="#CloudWatchEvent.event_id" title="Permalink to this definition">¶</a></dt>
<dd><p>A unique value is generated for every event. This can be helpful in
tracing events as they move through rules to targets, and are processed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.resources">
<span class="sig-name descname"><span class="pre">resources</span></span><a class="headerlink" href="#CloudWatchEvent.resources" title="Permalink to this definition">¶</a></dt>
<dd><p>This JSON array contains ARNs that identify resources that are involved
in the event. Inclusion of these ARNs is at the discretion of the
service.</p>
<p>For scheduled events, this will include the ARN of the CloudWatch
rule that triggered this event.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CloudWatchEvent.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#CloudWatchEvent.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda. This is useful if you need
the AWS request ID for tracing, or any other data in the context object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CloudWatchEvent.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CloudWatchEvent.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the original event dictionary provided
from Lambda.  This is useful if you need direct
access to the lambda event, for example if a
new key is added to the lambda event that has not
been mapped as an attribute to the <code class="docutils literal notranslate"><span class="pre">CloudWatchEvent</span></code>
object.  Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;account&#39;</span><span class="p">:</span> <span class="s1">&#39;123457940291&#39;</span><span class="p">,</span>
 <span class="s1">&#39;detail&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;detail-type&#39;</span><span class="p">:</span> <span class="s1">&#39;Scheduled Event&#39;</span><span class="p">,</span>
 <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;12345678-b9f1-4667-9c5e-39f98e9a6113&#39;</span><span class="p">,</span>
 <span class="s1">&#39;region&#39;</span><span class="p">:</span> <span class="s1">&#39;us-west-2&#39;</span><span class="p">,</span>
 <span class="s1">&#39;resources&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;arn:aws:events:us-west-2:123457940291:rule/testevents-dev-every_minute&#39;</span><span class="p">],</span>
 <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s1">&#39;aws.events&#39;</span><span class="p">,</span>
 <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-06-30T23:28:38Z&#39;</span><span class="p">,</span>
 <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="S3Event">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">S3Event</span></span><a class="headerlink" href="#S3Event" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the input argument for an S3 event.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_s3_event</span><span class="p">(</span><span class="n">bucket</span><span class="o">=</span><span class="s1">&#39;mybucket&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">event_handler</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">S3Event</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Event received for bucket: </span><span class="si">%s</span><span class="s2">, key </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                 <span class="n">event</span><span class="o">.</span><span class="n">bucket</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<p>In the code example above, the <code class="docutils literal notranslate"><span class="pre">event</span></code> argument is of
type <code class="docutils literal notranslate"><span class="pre">S3Event</span></code>, which will have the following
attributes.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="S3Event.bucket">
<span class="sig-name descname"><span class="pre">bucket</span></span><a class="headerlink" href="#S3Event.bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>The S3 bucket associated with the event.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="S3Event.key">
<span class="sig-name descname"><span class="pre">key</span></span><a class="headerlink" href="#S3Event.key" title="Permalink to this definition">¶</a></dt>
<dd><p>The S3 key name associated with the event.
The original key name in the S3 event payload
is URL encoded.  However, this <code class="docutils literal notranslate"><span class="pre">key</span></code> attribute automatically
URL decodes the key name for you.  If you need
access to the original URL encoded key name, you can
access it through the <code class="docutils literal notranslate"><span class="pre">to_dict()</span></code> method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="S3Event.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#S3Event.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda. This is useful if you need
the AWS request ID for tracing, or any other data in the context object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="S3Event.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#S3Event.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the original event dictionary provided
from Lambda.  This is useful if you need direct
access to the lambda event, for example if a
new key is added to the lambda event that has not
been mapped as an attribute to the <code class="docutils literal notranslate"><span class="pre">S3Event</span></code>
object.  Note that this event is not modified in any way.
This means that the key name of the S3 object is URL
encoded, which is the way that S3 sends this value
to Lambda.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SNSEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SNSEvent</span></span><a class="headerlink" href="#SNSEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the input argument for an SNS event handler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_sns_message</span><span class="p">(</span><span class="n">topic</span><span class="o">=</span><span class="s1">&#39;mytopic&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">event_handler</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">SNSEvent</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Message received with subject: </span><span class="si">%s</span><span class="s2">, message: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                 <span class="n">event</span><span class="o">.</span><span class="n">subject</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>In the code example above, the <code class="docutils literal notranslate"><span class="pre">event</span></code> argument is of
type <code class="docutils literal notranslate"><span class="pre">SNSEvent</span></code>, which will have the following
attributes.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="SNSEvent.subject">
<span class="sig-name descname"><span class="pre">subject</span></span><a class="headerlink" href="#SNSEvent.subject" title="Permalink to this definition">¶</a></dt>
<dd><p>The subject of the SNS message that was published.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="SNSEvent.message">
<span class="sig-name descname"><span class="pre">message</span></span><a class="headerlink" href="#SNSEvent.message" title="Permalink to this definition">¶</a></dt>
<dd><p>The string value of the SNS message that was published.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="SNSEvent.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#SNSEvent.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda. This is useful if you need
the AWS request ID for tracing, or any other data in the context object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SNSEvent.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#SNSEvent.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the original event dictionary provided
from Lambda.  This is useful if you need direct
access to the lambda event, for example if a
new key is added to the lambda event that has not
been mapped as an attribute to the <code class="docutils literal notranslate"><span class="pre">SNSEvent</span></code>
object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SQSEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SQSEvent</span></span><a class="headerlink" href="#SQSEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the input argument for an SQS event handler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_sqs_message</span><span class="p">(</span><span class="n">queue</span><span class="o">=</span><span class="s1">&#39;myqueue&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">event_handler</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">SQSEvent</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Event: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</pre></div>
</div>
<p>In the code example above, the <code class="docutils literal notranslate"><span class="pre">event</span></code> argument is of
type <code class="docutils literal notranslate"><span class="pre">SQSEvent</span></code>.  An <code class="docutils literal notranslate"><span class="pre">SQSEvent</span></code> can have multiple
sqs messages associated with it.  To access the multiple
messages, you can iterate over the <code class="docutils literal notranslate"><span class="pre">SQSEvent</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="SQSEvent.__iter__">
<span class="sig-name descname"><span class="pre">__iter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#SQSEvent.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over individual SQS messages associated with
the event.  Each element in the iterable is of type
<a class="reference internal" href="#SQSRecord" title="SQSRecord"><code class="xref py py-class docutils literal notranslate"><span class="pre">SQSRecord</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="SQSEvent.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#SQSEvent.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda. This is useful if you need
the AWS request ID for tracing, or any other data in the context object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SQSEvent.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#SQSEvent.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the original event dictionary provided
from Lambda.  This is useful if you need direct
access to the lambda event, for example if a
new key is added to the lambda event that has not
been mapped as an attribute to the <code class="docutils literal notranslate"><span class="pre">SQSEvent</span></code>
object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SQSRecord">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SQSRecord</span></span><a class="headerlink" href="#SQSRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a single SQS record within an <a class="reference internal" href="#SQSEvent" title="SQSEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">SQSEvent</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="SQSRecord.body">
<span class="sig-name descname"><span class="pre">body</span></span><a class="headerlink" href="#SQSRecord.body" title="Permalink to this definition">¶</a></dt>
<dd><p>The body of the SQS message.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="SQSRecord.receipt_handle">
<span class="sig-name descname"><span class="pre">receipt_handle</span></span><a class="headerlink" href="#SQSRecord.receipt_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>The receipt handle associated with the message.  This is useful
if you need to manually delete an SQS message to account for
partial failures.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="SQSRecord.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#SQSRecord.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SQSRecord.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#SQSRecord.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the original dictionary associated with the given
message. This is useful if you need direct
access to the lambda event.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="KinesisEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">KinesisEvent</span></span><a class="headerlink" href="#KinesisEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the input argument for a Kinesis data stream event handler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_kinesis_record</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="s1">&#39;mystream&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">event_handler</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">KinesisEvent</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Event: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</pre></div>
</div>
<p>In the code example above, the <code class="docutils literal notranslate"><span class="pre">event</span></code> argument is of
type <code class="docutils literal notranslate"><span class="pre">KinesisEvent</span></code>.  A <code class="docutils literal notranslate"><span class="pre">KinesisEvent</span></code> can have multiple
messages associated with it.  To access the multiple
messages, you can iterate over the <code class="docutils literal notranslate"><span class="pre">KinesisEvent</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="KinesisEvent.__iter__">
<span class="sig-name descname"><span class="pre">__iter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#KinesisEvent.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over individual Kinesis records associated with
the event.  Each element in the iterable is of type
<a class="reference internal" href="#KinesisRecord" title="KinesisRecord"><code class="xref py py-class docutils literal notranslate"><span class="pre">KinesisRecord</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="KinesisEvent.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#KinesisEvent.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda. This is useful if you need
the AWS request ID for tracing, or any other data in the context object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="KinesisEvent.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#KinesisEvent.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the original event dictionary provided
from Lambda.  This is useful if you need direct
access to the lambda event, for example if a
new key is added to the lambda event that has not
been mapped as an attribute to the <code class="docutils literal notranslate"><span class="pre">SQSEvent</span></code>
object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="KinesisRecord">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">KinesisRecord</span></span><a class="headerlink" href="#KinesisRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a single Kinesis record within a <a class="reference internal" href="#KinesisEvent" title="KinesisEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">KinesisEvent</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="KinesisRecord.data">
<span class="sig-name descname"><span class="pre">data</span></span><a class="headerlink" href="#KinesisRecord.data" title="Permalink to this definition">¶</a></dt>
<dd><p>The payload data for the Kinesis record.  This data is automatically
base64 decoded for you and will be a <code class="docutils literal notranslate"><span class="pre">bytes</span></code> type.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="KinesisRecord.sequence_number">
<span class="sig-name descname"><span class="pre">sequence_number</span></span><a class="headerlink" href="#KinesisRecord.sequence_number" title="Permalink to this definition">¶</a></dt>
<dd><p>The unique identifier of the record within its shard.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="KinesisRecord.partition_key">
<span class="sig-name descname"><span class="pre">partition_key</span></span><a class="headerlink" href="#KinesisRecord.partition_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies which shard in the stream the data record is assigned to.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="KinesisRecord.schema_version">
<span class="sig-name descname"><span class="pre">schema_version</span></span><a class="headerlink" href="#KinesisRecord.schema_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Schema version for the record.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="KinesisRecord.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#KinesisRecord.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>The approximate time that the record was inserted into the stream.  This
is automatically converted to a <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="KinesisRecord.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#KinesisRecord.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="KinesisRecord.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#KinesisRecord.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the original dictionary associated with the given
message. This is useful if you need direct
access to the lambda event.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="DynamoDBEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DynamoDBEvent</span></span><a class="headerlink" href="#DynamoDBEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the input argument for a DynamoDB stream event handler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_dynamodb_record</span><span class="p">(</span><span class="n">stream_arn</span><span class="o">=</span><span class="s1">&#39;arn:aws:us-west-2:.../stream&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">event_handler</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">DynamoDBEvent</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Event: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>
        <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</pre></div>
</div>
<p>In the code example above, the <code class="docutils literal notranslate"><span class="pre">event</span></code> argument is of
type <code class="docutils literal notranslate"><span class="pre">DynamoDBEvent</span></code>.  A <code class="docutils literal notranslate"><span class="pre">DynamoDBEvent</span></code> can have multiple
messages associated with it.  To access the multiple
messages, you can iterate over the <code class="docutils literal notranslate"><span class="pre">DynamoDBEvent</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="DynamoDBEvent.__iter__">
<span class="sig-name descname"><span class="pre">__iter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#DynamoDBEvent.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over individual DynamoDB records associated with
the event.  Each element in the iterable is of type
<a class="reference internal" href="#DynamoDBRecord" title="DynamoDBRecord"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamoDBRecord</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBEvent.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#DynamoDBEvent.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda. This is useful if you need
the AWS request ID for tracing, or any other data in the context object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="DynamoDBEvent.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#DynamoDBEvent.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the original event dictionary provided
from Lambda.  This is useful if you need direct
access to the lambda event, for example if a
new key is added to the lambda event that has not
been mapped as an attribute to the <code class="docutils literal notranslate"><span class="pre">SQSEvent</span></code>
object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="DynamoDBRecord">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DynamoDBRecord</span></span><a class="headerlink" href="#DynamoDBRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a single DynamoDB record within a <a class="reference internal" href="#DynamoDBEvent" title="DynamoDBEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamoDBEvent</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#DynamoDBRecord.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>The approximate time that the record was the stream record was created.
This is automatically converted to a <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><a class="headerlink" href="#DynamoDBRecord.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>The primary key attribute(s) for the DynamoDB item that was modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.new_image">
<span class="sig-name descname"><span class="pre">new_image</span></span><a class="headerlink" href="#DynamoDBRecord.new_image" title="Permalink to this definition">¶</a></dt>
<dd><p>The item in the DynamoDB table as it appeared after it was modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.old_image">
<span class="sig-name descname"><span class="pre">old_image</span></span><a class="headerlink" href="#DynamoDBRecord.old_image" title="Permalink to this definition">¶</a></dt>
<dd><p>The item in the DynamoDB table as it appeared before it was modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.sequence_number">
<span class="sig-name descname"><span class="pre">sequence_number</span></span><a class="headerlink" href="#DynamoDBRecord.sequence_number" title="Permalink to this definition">¶</a></dt>
<dd><p>The sequence number of the stream record.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.size_bytes">
<span class="sig-name descname"><span class="pre">size_bytes</span></span><a class="headerlink" href="#DynamoDBRecord.size_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>The size of the stream record, in bytes.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.stream_view_type">
<span class="sig-name descname"><span class="pre">stream_view_type</span></span><a class="headerlink" href="#DynamoDBRecord.stream_view_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of data from the modified DynamoDB item.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.aws_region">
<span class="sig-name descname"><span class="pre">aws_region</span></span><a class="headerlink" href="#DynamoDBRecord.aws_region" title="Permalink to this definition">¶</a></dt>
<dd><p>The region associated with the event.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.event_id">
<span class="sig-name descname"><span class="pre">event_id</span></span><a class="headerlink" href="#DynamoDBRecord.event_id" title="Permalink to this definition">¶</a></dt>
<dd><p>A unique identifier for the event.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.event_name">
<span class="sig-name descname"><span class="pre">event_name</span></span><a class="headerlink" href="#DynamoDBRecord.event_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of data modification that was performed on the DynamoDB table.
This can be: <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>, <code class="docutils literal notranslate"><span class="pre">MODIFY</span></code>, or <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.event_source_arn">
<span class="sig-name descname"><span class="pre">event_source_arn</span></span><a class="headerlink" href="#DynamoDBRecord.event_source_arn" title="Permalink to this definition">¶</a></dt>
<dd><p>The ARN of the DynamoDB stream.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.table_name">
<span class="sig-name descname"><span class="pre">table_name</span></span><a class="headerlink" href="#DynamoDBRecord.table_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the DynamoDB table associated with the stream.  This value is
computed from the <code class="docutils literal notranslate"><span class="pre">event_source_arn</span></code> parameter and will be an empty string
if Chalice is unable to parse the table name from the event source ARN.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="DynamoDBRecord.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#DynamoDBRecord.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="DynamoDBRecord.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#DynamoDBRecord.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the original dictionary associated with the given
message. This is useful if you need direct
access to the lambda event.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LambdaFunctionEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LambdaFunctionEvent</span></span><a class="headerlink" href="#LambdaFunctionEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the input argument of middleware registered to a
pure Lambda function (<code class="docutils literal notranslate"><span class="pre">&#64;app.lambda_function()</span></code>).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="LambdaFunctionEvent.event">
<span class="sig-name descname"><span class="pre">event</span></span><a class="headerlink" href="#LambdaFunctionEvent.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The original input event dictionary.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LambdaFunctionEvent.context">
<span class="sig-name descname"><span class="pre">context</span></span><a class="headerlink" href="#LambdaFunctionEvent.context" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html">Lambda context object</a>
that is passed to the handler by AWS Lambda.</p>
</dd></dl>

</dd></dl>

</section>
<section id="blueprints">
<h1>Blueprints<a class="headerlink" href="#blueprints" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="Blueprint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Blueprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">import_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Blueprint" title="Permalink to this definition">¶</a></dt>
<dd><p>An object used for grouping related handlers together.
This is primarily used as a mechanism for organizing your lambda
handlers.  Any decorator methods defined in the <a class="reference internal" href="#Chalice" title="Chalice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Chalice</span></code></a>
object are also defined on a <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> object.  You can register
a blueprint to a Chalice app using the <a class="reference internal" href="#Chalice.register_blueprint" title="Chalice.register_blueprint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Chalice.register_blueprint()</span></code></a>
method.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">import_name</span></code> is the module in which the Blueprint is defined.
It is used to construct the appropriate handler string when creating
the Lambda functions associated with a Blueprint.  This is typically
the <cite>__name__</cite> attribute:<code class="docutils literal notranslate"><span class="pre">mybp</span> <span class="pre">=</span> <span class="pre">Blueprint(__name__)</span></code>.</p>
<p>See <a class="reference internal" href="topics/blueprints.html"><span class="doc">Blueprints</span></a> for more information.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In ./app.py</span>

<span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span>
<span class="kn">from</span> <span class="nn">chalicelib</span> <span class="kn">import</span> <span class="n">myblueprint</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s1">&#39;blueprints&#39;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">register_blueprint</span><span class="p">(</span><span class="n">myblueprint</span><span class="p">)</span>

<span class="c1"># In chalicelib/myblueprint.py</span>

<span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Blueprint</span>

<span class="n">myblueprint</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@myblueprint</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;hello&#39;</span><span class="p">:</span> <span class="s1">&#39;world&#39;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="websockets">
<h1>Websockets<a class="headerlink" href="#websockets" title="Permalink to this headline">¶</a></h1>
<span class="target" id="websocket-api"></span><dl class="py class">
<dt class="sig sig-object py" id="WebsocketEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">WebsocketEvent</span></span><a class="headerlink" href="#WebsocketEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Event object event that is passed as the sole arugment to any handler
function decorated with one of the three websocket related handlers:
<code class="docutils literal notranslate"><span class="pre">on_ws_connect</span></code>, <code class="docutils literal notranslate"><span class="pre">on_ws_disconnect</span></code>, <code class="docutils literal notranslate"><span class="pre">on_ws_message</span></code>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="WebsocketEvent.domain_name">
<span class="sig-name descname"><span class="pre">domain_name</span></span><a class="headerlink" href="#WebsocketEvent.domain_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The domain name of the endpoint for the API Gateway Websocket API.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="WebsocketEvent.stage">
<span class="sig-name descname"><span class="pre">stage</span></span><a class="headerlink" href="#WebsocketEvent.stage" title="Permalink to this definition">¶</a></dt>
<dd><p>The API Gateway stage of the Websocket API.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="WebsocketEvent.connection_id">
<span class="sig-name descname"><span class="pre">connection_id</span></span><a class="headerlink" href="#WebsocketEvent.connection_id" title="Permalink to this definition">¶</a></dt>
<dd><p>A handle that uniquely identifies a connection with API Gateway.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="WebsocketEvent.body">
<span class="sig-name descname"><span class="pre">body</span></span><a class="headerlink" href="#WebsocketEvent.body" title="Permalink to this definition">¶</a></dt>
<dd><p>The message body received. This is only populated on the <code class="docutils literal notranslate"><span class="pre">on_ws_message</span></code>
otherwise it will be set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="WebsocketEvent.json_body">
<span class="sig-name descname"><span class="pre">json_body</span></span><a class="headerlink" href="#WebsocketEvent.json_body" title="Permalink to this definition">¶</a></dt>
<dd><p>The parsed JSON body (<code class="docutils literal notranslate"><span class="pre">json.loads(body)</span></code>) of the message. If the body is
not JSON parsable then using this attribute will raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
</dd></dl>

<p>See <a class="reference internal" href="topics/websockets.html"><span class="doc">Websockets</span></a> for more information.</p>
</dd></dl>

</section>
<section id="testing">
<span id="testing-api"></span><h1>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="Client">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dev'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Client" title="Permalink to this definition">¶</a></dt>
<dd><p>A test client used to write tests for Chalice apps.  It allows you to
test Lambda function invocation as well as REST APIs.  Depending
on what you want to test, you’ll access the various attributes
of this class.  You can use this class as a context manager.
When entering the context manager, any environment variables
specified for your function will be set.  The original environment
variables are put back when the block is exited:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice.test</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="k">with</span> <span class="n">Client</span><span class="p">(</span><span class="n">app</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/my-data&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="topics/testing.html"><span class="doc">Testing</span></a> documentation for more details on testing
your Chalice app.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Client.lambda_">
<span class="sig-name descname"><span class="pre">lambda_</span></span><a class="headerlink" href="#Client.lambda_" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the Lambda test client <a class="reference internal" href="#TestLambdaClient" title="TestLambdaClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestLambdaClient</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Client.http">
<span class="sig-name descname"><span class="pre">http</span></span><a class="headerlink" href="#Client.http" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the test client for REST APIs <a class="reference internal" href="#TestHTTPClient" title="TestHTTPClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestHTTPClient</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Client.events">
<span class="sig-name descname"><span class="pre">events</span></span><a class="headerlink" href="#Client.events" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the test client for generating Lambda events
<a class="reference internal" href="#TestEventsClient" title="TestEventsClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestEventsClient</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TestLambdaClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TestLambdaClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">import_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestLambdaClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Test client for invoking Lambda functions.  This class should not be
instantiated directly, and instead should be accessed via the
<code class="docutils literal notranslate"><span class="pre">Client.lambda_</span></code> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">lambda_function</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">myfunction</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;hello&quot;</span><span class="p">:</span> <span class="s2">&quot;world&quot;</span><span class="p">}</span>

<span class="k">with</span> <span class="n">Client</span><span class="p">(</span><span class="n">app</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">lambda_</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="s2">&quot;myfunction&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">payload</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;hello&quot;</span><span class="p">:</span> <span class="s2">&quot;world&quot;</span><span class="p">}</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="TestLambdaClient.invoke">
<span class="sig-name descname"><span class="pre">invoke</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestLambdaClient.invoke" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke a Lambda function by name.  The name should match
the resource name of the function.  This is typically the
name of the python function unless an explicit <code class="docutils literal notranslate"><span class="pre">name=</span></code>
kwarg is provided when registering the function.</p>
<p>Returns an <a class="reference internal" href="#InvokeResponse" title="InvokeResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvokeResponse</span></code></a> instance.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TestHTTPClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TestHTTPClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">import_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestHTTPClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Test client for REST APIs.  This class should not be
instantiated directly, and instead should be accessed via the
<code class="docutils literal notranslate"><span class="pre">Client.http</span></code> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Client</span><span class="p">(</span><span class="n">app</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/my-route&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="TestHTTPClient.request">
<span class="sig-name descname"><span class="pre">request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">b''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestHTTPClient.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a test HTTP request to your REST API.  Returns
an <a class="reference internal" href="#HTTPResponse" title="HTTPResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPResponse</span></code></a>.  You can also use the methods below
to make a request with a specific HTTP method instead of using
this method directly, e.g. <code class="docutils literal notranslate"><span class="pre">client.http.get(&quot;/foo&quot;)</span></code> instead
of <code class="docutils literal notranslate"><span class="pre">client.http.request(&quot;GET&quot;,</span> <span class="pre">&quot;/foo&quot;)</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestHTTPClient.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestHTTPClient.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an HTTP GET request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestHTTPClient.post">
<span class="sig-name descname"><span class="pre">post</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestHTTPClient.post" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an HTTP POST request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestHTTPClient.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestHTTPClient.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an HTTP PUT request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestHTTPClient.patch">
<span class="sig-name descname"><span class="pre">patch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestHTTPClient.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an HTTP PATCH request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestHTTPClient.options">
<span class="sig-name descname"><span class="pre">options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestHTTPClient.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an HTTP OPTIONS request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestHTTPClient.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestHTTPClient.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an HTTP DELETE request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestHTTPClient.head">
<span class="sig-name descname"><span class="pre">head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestHTTPClient.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an HTTP HEAD request.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TestEventsClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TestEventsClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">import_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestEventsClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Test client for generating Lambda events.  This class should not be
instantiated directly, and instead should be accessed via the
<code class="docutils literal notranslate"><span class="pre">Client.events</span></code> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Client</span><span class="p">(</span><span class="n">app</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">lambda_</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
        <span class="s2">&quot;my_sns_handler&quot;</span><span class="p">,</span>
        <span class="n">client</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">generate_sns_event</span><span class="p">(</span><span class="s2">&quot;Hello world&quot;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="TestEventsClient.generate_sns_event">
<span class="sig-name descname"><span class="pre">generate_sns_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestEventsClient.generate_sns_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a sample SNS event.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestEventsClient.generate_s3_event">
<span class="sig-name descname"><span class="pre">generate_s3_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ObjectCreated:Put'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestEventsClient.generate_s3_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a sample S3 event.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestEventsClient.generate_sqs_event">
<span class="sig-name descname"><span class="pre">generate_sqs_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message_bodies</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'queue-name'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestEventsClient.generate_sqs_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a sample SQS event.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestEventsClient.generate_cw_event">
<span class="sig-name descname"><span class="pre">generate_cw_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detail_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detail</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resources</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'us-west-2'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestEventsClient.generate_cw_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a sample CloudWatch event.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TestEventsClient.generate_kinesis_event">
<span class="sig-name descname"><span class="pre">generate_kinesis_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message_bodies</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'stream-name'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TestEventsClient.generate_kinesis_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a Kinesis event.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="HTTPResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">HTTPResponse</span></span><a class="headerlink" href="#HTTPResponse" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="HTTPResponse.body">
<span class="sig-name descname"><span class="pre">body</span></span><a class="headerlink" href="#HTTPResponse.body" title="Permalink to this definition">¶</a></dt>
<dd><p>The body of the HTTP response, in <code class="docutils literal notranslate"><span class="pre">bytes</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="HTTPResponse.headers">
<span class="sig-name descname"><span class="pre">headers</span></span><a class="headerlink" href="#HTTPResponse.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of HTTP headers in the resopnse.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="HTTPResponse.status_code">
<span class="sig-name descname"><span class="pre">status_code</span></span><a class="headerlink" href="#HTTPResponse.status_code" title="Permalink to this definition">¶</a></dt>
<dd><p>The status code of the HTTP response.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="InvokeResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">InvokeResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">payload</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#InvokeResponse" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="InvokeResponse.payload">
<span class="sig-name descname"><span class="pre">payload</span></span><a class="headerlink" href="#InvokeResponse.payload" title="Permalink to this definition">¶</a></dt>
<dd><p>The response payload of Lambda invocation.</p>
</dd></dl>

</dd></dl>

</section>
<section id="aws-cdk">
<span id="cdk-api"></span><h1>AWS CDK<a class="headerlink" href="#aws-cdk" title="Permalink to this headline">¶</a></h1>
<p>The Chalice CDK construct is available in the <code class="docutils literal notranslate"><span class="pre">chalice.cdk</span></code> namespace.
For more details on using the AWS CDK with Chalice, see <a class="reference internal" href="tutorials/cdk.html"><span class="doc">Deploying with the AWS CDK</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">cdk</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="cdk.Chalice">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cdk.</span></span><span class="sig-name descname"><span class="pre">Chalice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage_config=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserve_logical_ids=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*\*kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cdk.Chalice" title="Permalink to this definition">¶</a></dt>
<dd><p>A test client used to write tests for Chalice apps.  It allows you to</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scope</strong> – The CDK scope that the construct is created within.</p></li>
<li><p><strong>id</strong> (<em>str</em>) – The identifier for the construct.  Must be unique within the
scope in which it’s created.</p></li>
<li><p><strong>source_dir</strong> (<em>str</em>) – Path to Chalice application source code.</p></li>
<li><p><strong>stage_config</strong> (<em>dict</em>) – Chalice stage configuration.
The configuration object should have the same structure as Chalice
JSON stage configuration.</p></li>
<li><p><strong>preserve_logical_ids</strong> (<em>bool</em>) – Whether the resources should have
the same logical IDs in the resulting CDK template as they did in
the original CloudFormation template file. If you’re vending a
Construct using cdk-chalice, make sure to pass this as <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Note: regardless of whether this option is true or false, the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">sam_template</span></code>’s <code class="docutils literal notranslate"><span class="pre">get_resource</span></code> and related methods always
uses the original logical ID of the resource/element, as specified
in the template file.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ChaliceError</strong> – Error packaging the Chalice application.</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chalice</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;ChaliceApp&#39;</span><span class="p">,</span> <span class="n">source_dir</span><span class="o">=</span><span class="s1">&#39;../runtime&#39;</span><span class="p">,</span>
    <span class="n">stage_config</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;environment_variables&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;MY_ENV_VAR&#39;</span><span class="p">:</span> <span class="s1">&#39;FOO&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="cdk.Chalice.get_resource">
<span class="sig-name descname"><span class="pre">get_resource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cdk.Chalice.get_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a low-level CfnResource from the resources in a Chalice app with
the given resource name.  The resource name corresponds to the logical ID
of the underlying resource in the SAM template.  Any modifications
performed on that resource will be reflected in the resulting CDK
template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>resource_name</strong> (<em>str</em>) – The logical ID of the resource in the SAM template.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>aws_cdk.cdk.CfnResource</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cdk.Chalice.get_role">
<span class="sig-name descname"><span class="pre">get_role</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cdk.Chalice.get_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an <code class="docutils literal notranslate"><span class="pre">IRole</span></code> for an underlying SAM template resource.  This is useful
if you want to grant additional permissions to an IAM role constructed by Chalice.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dynamodb_table</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">chalice</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="s1">&#39;ChaliceApp&#39;</span><span class="p">,</span> <span class="o">....</span><span class="p">)</span>
<span class="n">dynamodb_table</span><span class="o">.</span><span class="n">grant_read_write_data</span><span class="p">(</span><span class="n">chalice</span><span class="o">.</span><span class="n">get_role</span><span class="p">(</span><span class="s1">&#39;DefaultRole&#39;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>resource_name</strong> (<em>str</em>) – The logical ID of the resource in the SAM template.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>aws_cdk.aws_iam.IRole</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cdk.Chalice.get_function">
<span class="sig-name descname"><span class="pre">get_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cdk.Chalice.get_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an <code class="docutils literal notranslate"><span class="pre">IFunction</span></code> for an underlying SAM template resource.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>resource_name</strong> (<em>str</em>) – The logical ID of the resource in the SAM template.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>aws_cdk.aws_lambda.IFunction</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cdk.Chalice.add_environment_variable">
<span class="sig-name descname"><span class="pre">add_environment_variable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cdk.Chalice.add_environment_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to add environment variables to a single Lambda
function constructed by Chalice.  You can also add environment variables
to Lambda functions using the <code class="docutils literal notranslate"><span class="pre">stage_config</span></code> parameter when creating the
<code class="docutils literal notranslate"><span class="pre">Chalice()</span></code> construct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The environment variable key name.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – The value of the environment variable.</p></li>
<li><p><strong>function_name</strong> (<em>str</em>) – The logical ID of the Lambda function resource.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


                    
                    <section class="relations">
                        
                        <a href="topics/middleware.html" title="previous chapter" class="previous-page clearfix hidden-xs">← Middleware</a>
                        
                        <a href="samples/index.html" title="next chapter" class="next-page clearfix">Sample Applications →</a>
                    </section>
                    
                </article><aside id="right-column" class="side-column hidden-sm">
                    <div class="column-body">
                        <section class="sidebar">
                            
                            <section class="next-previous">
                                
                                <a href="topics/middleware.html" title="previous chapter" class="previous-page clearfix hidden-xs">← Prev</a>
                                
                                <a href="samples/index.html" title="next chapter" class="next-page clearfix">Next →</a>
                            </section>
                            
                            <ul>
<li><a class="reference internal" href="#">Chalice</a></li>
<li><a class="reference internal" href="#request">Request</a></li>
<li><a class="reference internal" href="#response">Response</a></li>
<li><a class="reference internal" href="#authorization">Authorization</a><ul>
<li><a class="reference internal" href="#built-in-authorizers">Built-in Authorizers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#apigateway">APIGateway</a></li>
<li><a class="reference internal" href="#websocketapi">WebsocketAPI</a></li>
<li><a class="reference internal" href="#cors">CORS</a></li>
<li><a class="reference internal" href="#event-sources">Event Sources</a></li>
<li><a class="reference internal" href="#blueprints">Blueprints</a></li>
<li><a class="reference internal" href="#websockets">Websockets</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#aws-cdk">AWS CDK</a></li>
</ul>

                        </section>
                    </div>
                </aside></div>
        </section>
        
    
<footer id="footer">
    <div class="width-wrapper">
        <div class="copyright">
            <p>©2020, Amazon Web Services, Inc or its affiliates. All rights reserved.</p>
        </div>
    </div>
</footer>
  </body>
</html>