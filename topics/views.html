
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Views &#8212; AWS Chalice</title><link rel="stylesheet" href="../_static/bootstrap-reboot.css" type="text/css" />
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    <link rel="stylesheet" href="../_static/custom-tabs.css" type="text/css" />
    

    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script type="text/javascript">
        function _scroll(subjectId) {
            var subjectElement = $(subjectId);
            var actualSubjectHeight = subjectElement.height();
            var startingPosition = subjectElement[0].getBoundingClientRect().top;
            return function() {
                var availableHeight = $(window).height() - startingPosition;
                // Subtract the scroll position to account for sticky movement.
                availableHeight += Math.min($(window).scrollTop(), 40);
                var cappedHeight = Math.min(actualSubjectHeight, availableHeight);
                if (subjectElement.css("height") !== cappedHeight) {
                    subjectElement.css("height", cappedHeight);
                }
            };
        }

        // Scroll and resize the the columns when scrolled.
        $(function() {
            var rightScroll = _scroll("#right-column > .column-body");
            var scrollFn = function() {
                rightScroll.call(this, arguments);
            };
            scrollFn();
            $(window).scroll(scrollFn);
            $(window).resize(scrollFn);
        });

        // Scroll spy to change highlighted navigation element.
        $(function() {
            var section = document.querySelectorAll(".section");
            var sections = {};
            var i = 0;
            Array.prototype.forEach.call(section, function(e) {
                sections[e.id] = e.offsetTop;
            });
            var scrollSpy = function() {
                var scrollPosition = document.documentElement.scrollTop || document.body.scrollTop;
                for (i in sections) {
                    if (sections[i] <= scrollPosition) {
                        $('#right-column .current').removeClass('current');
                        $("#right-column a[href='#" + i + "']").addClass('current');
                    }
                }
            };
            $(window).scroll(scrollSpy);
            scrollSpy();
        });
    </script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-168492171-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-168492171-3');
    </script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuration File" href="configfile.html" />
    <link rel="prev" title="Routing" href="routing.html" />
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  </head><body>
    <header>
        <div class="header-flex width-wrapper">
            <div class="site-logo">
                <a href="../index.html">
		  <span class="logo-icon"><img src="../_static/img/chalice-logo-icon-small.png" /></span>
                </a>
            </div>

            <ul id="page-navigation">
                <li class="site-page first"><a href="../quickstart.html">Quick Start</a></li>
                <li class="site-page"><a href="../tutorials/index.html">Tutorials</a></li>
                <li class="site-page"><a href="../samples/index.html">Samples</a></li>
                <li class="site-page"><a href="../main.html">Documentation</a></li>
                <li class="site-page"><a href="https://github.com/aws/chalice">Code</a></li>
                <li class="site-search hidden-sm">
                    <form action="../search.html" method="get">
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />
                        <input class="search-input" autocomplete="off" type="search" name="q" placeholder="Search" />
                    </form>
                </li>
            </ul>
        </div>
    </header>
    
        
        
        <section id="page-container">
            <div class="width-wrapper flex">
                <article id="document-body">
                    
                    <ul class="rel-parents">
                    <li><a href="index.html" accesskey="U">Topics</a></li>
                    </ul>
                    
                    
  <section id="views">
<h1>Views<a class="headerlink" href="#views" title="Permalink to this headline">¶</a></h1>
<p>A view function in chalice is the function attached to an
<code class="docutils literal notranslate"><span class="pre">&#64;app.route()</span></code> decorator.  In the example below, <code class="docutils literal notranslate"><span class="pre">index</span></code>
is the view function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s1">&#39;helloworld&#39;</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;view&#39;</span><span class="p">:</span> <span class="s1">&#39;index&#39;</span><span class="p">}</span>
</pre></div>
</div>
<section id="view-function-parameters">
<h2>View Function Parameters<a class="headerlink" href="#view-function-parameters" title="Permalink to this headline">¶</a></h2>
<p>A view function’s parameters correspond to the number of captured
URL parameters specified in the <code class="docutils literal notranslate"><span class="pre">&#64;app.route</span></code> call.  In the example above,
the route <code class="docutils literal notranslate"><span class="pre">/</span></code> specifies no captured parameters so the <code class="docutils literal notranslate"><span class="pre">index</span></code> view
function accepts no parameters.  However, in the view function below,
a single URL parameter, <code class="docutils literal notranslate"><span class="pre">{city}</span></code> is specified, so the view function
must accept a single parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s1">&#39;helloworld&#39;</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/cities/</span><span class="si">{city}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">city</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;city&#39;</span><span class="p">:</span> <span class="n">city</span><span class="p">}</span>
</pre></div>
</div>
<p>This indicates that the value of <code class="docutils literal notranslate"><span class="pre">{city}</span></code> is variable, and whatever
value is provided in the URL is passed to the <code class="docutils literal notranslate"><span class="pre">index</span></code> view function.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">cities</span><span class="o">/</span><span class="n">seattle</span>   <span class="o">--&gt;</span> <span class="n">index</span><span class="p">(</span><span class="s1">&#39;seattle&#39;</span><span class="p">)</span>
<span class="n">GET</span> <span class="o">/</span><span class="n">cities</span><span class="o">/</span><span class="n">portland</span>  <span class="o">--&gt;</span> <span class="n">index</span><span class="p">(</span><span class="s1">&#39;portland&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to access any other metadata of the incoming HTTP request,
you can use the <code class="docutils literal notranslate"><span class="pre">app.current_request</span></code> property, which is an instance of
the the <a class="reference internal" href="../api.html#Request" title="Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> class.</p>
</section>
<section id="view-function-return-values">
<h2>View Function Return Values<a class="headerlink" href="#view-function-return-values" title="Permalink to this headline">¶</a></h2>
<p>The response returned back to the client depends on the behavior
of the view function.  There are several options available:</p>
<ul class="simple">
<li><p>Returning an instance of <a class="reference internal" href="../api.html#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a>.  This gives you
complete control over what gets returned back to the customer.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">bytes</span></code> type response body must have a <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header value
that is present in the <code class="docutils literal notranslate"><span class="pre">app.api.binary_types</span></code> list in order to be handled
properly.</p></li>
<li><p>Any other return value will be serialized as JSON and sent back
as the response body with content type <code class="docutils literal notranslate"><span class="pre">application/json</span></code>.</p></li>
<li><p>Any subclass of <code class="docutils literal notranslate"><span class="pre">ChaliceViewError</span></code> will result in an HTTP
response being returned with the status code associated with that
response, and a JSON response body containing a <code class="docutils literal notranslate"><span class="pre">Code</span></code> and a <code class="docutils literal notranslate"><span class="pre">Message</span></code>.
This is discussed in more detail below.</p></li>
<li><p>Any other exception raised will result in a 500 HTTP response.
The body of that response depends on whether debug mode is enabled.</p></li>
</ul>
</section>
<section id="error-handling">
<span id="view-error-handling"></span><h2>Error Handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h2>
<p>Chalice provides a built in set of exception classes that map to common
HTTP errors including:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BadRequestError</span></code>- returns a status code of 400</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UnauthorizedError</span></code>- returns a status code of 401</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ForbiddenError</span></code>- returns a status code of 403</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NotFoundError</span></code>- returns a status code of 404</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ConflictError</span></code>- returns a status code of 409</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TooManyRequestsError</span></code>- returns a status code of 429</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ChaliceViewError</span></code>- returns a status code of 500</p></li>
</ul>
<p>You can raise these anywhere in your view functions and chalice will convert
these to the appropriate HTTP response.  The default chalice error responses
will send the error back as <code class="docutils literal notranslate"><span class="pre">application/json</span></code> with the response body
containing a <code class="docutils literal notranslate"><span class="pre">Code</span></code> corresponding to the exception class name and a
<code class="docutils literal notranslate"><span class="pre">Message</span></code> key corresponding to the string provided when the exception
was instantiated.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span>
<span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">BadRequestError</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;badrequest&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/badrequest&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">badrequest</span><span class="p">():</span>
    <span class="k">raise</span> <span class="n">BadRequestError</span><span class="p">(</span><span class="s2">&quot;This is a bad request&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This view function will generate the following HTTP response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ http https://endpoint/api/badrequest
HTTP/1.1 400 Bad Request

{
    &quot;Code&quot;: &quot;BadRequestError&quot;,
    &quot;Message&quot;: &quot;This is a bad request&quot;
}
</pre></div>
</div>
<p>In addition to the built in chalice exceptions, you can use the
<a class="reference internal" href="../api.html#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> class to customize the HTTP errors if you prefer to
either not have JSON error responses or customize the JSON response body
for errors.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span><span class="p">,</span> <span class="n">Response</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;badrequest&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/badrequest&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">badrequest</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="s1">&#39;Plain text error message&#39;</span><span class="p">,</span>
                    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">},</span>
                    <span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="specifying-http-methods">
<h2>Specifying HTTP Methods<a class="headerlink" href="#specifying-http-methods" title="Permalink to this headline">¶</a></h2>
<p>So far, our examples have only allowed GET requests. It’s actually possible
to support additional HTTP methods. Here’s an example of a view function that
supports PUT:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/resource/</span><span class="si">{value}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PUT&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">put_test</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
</pre></div>
</div>
<p>We can test this method using the <code class="docutils literal notranslate"><span class="pre">http</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ http PUT https://endpoint/api/resource/foo
HTTP/1.1 200 OK

{
    &quot;value&quot;: &quot;foo&quot;
}
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">methods</span></code> kwarg accepts a list of methods.  Your view function
will be called when any of the HTTP methods you specify are used for the
specified resource.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/myview&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;PUT&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The above view function will be called when either an HTTP POST or
PUT is sent to <code class="docutils literal notranslate"><span class="pre">/myview</span></code> as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">myview</span>   <span class="o">--&gt;</span> <span class="n">myview</span><span class="p">()</span>
<span class="n">PUT</span> <span class="o">/</span><span class="n">myview</span>  <span class="o">--&gt;</span> <span class="n">myview</span><span class="p">()</span>
</pre></div>
</div>
<p>Alternatively if you do not want to share the same view function across
multiple HTTP methods for the same route url, you may define separate view
functions to the same route url but have the view functions differ by
HTTP method. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/myview&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">myview_post</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/myview&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PUT&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">myview_put</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>This setup will route all HTTP POST’s to <code class="docutils literal notranslate"><span class="pre">/myview</span></code> to the <code class="docutils literal notranslate"><span class="pre">myview_post()</span></code>
view function and route all HTTP PUT’s to <code class="docutils literal notranslate"><span class="pre">/myview</span></code> to the <code class="docutils literal notranslate"><span class="pre">myview_put()</span></code>
view function as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">myview</span>   <span class="o">--&gt;</span> <span class="n">myview_post</span><span class="p">()</span>
<span class="n">PUT</span> <span class="o">/</span><span class="n">myview</span>  <span class="o">--&gt;</span> <span class="n">myview_put</span><span class="p">()</span>
</pre></div>
</div>
<p>If you do chose to use separate view functions for the same route path, it is
important to know:</p>
<ul class="simple">
<li><p>View functions that share the same route cannot have the same names.
For example, two view functions that both share the same route path cannot
both be named <code class="docutils literal notranslate"><span class="pre">view()</span></code>.</p></li>
<li><p>View functions that share the same route cannot overlap in supported HTTP
methods. For example if two view functions both share the same route path,
they both cannot contain <code class="docutils literal notranslate"><span class="pre">'PUT'</span></code> in their route <code class="docutils literal notranslate"><span class="pre">methods</span></code> list.</p></li>
<li><p>View functions that share the same route path and have CORS configured cannot
have differing CORS configuration. For example, if two view functions that
both share the same route path, the route configuration for one of the
view functions cannot set <code class="docutils literal notranslate"><span class="pre">cors=True</span></code> while having the route
configuration of the other view function be set to
<code class="docutils literal notranslate"><span class="pre">cors=app.CORSConfig(allow_origin='https://foo.example.com')</span></code>.</p></li>
</ul>
</section>
<section id="binary-content">
<h2>Binary Content<a class="headerlink" href="#binary-content" title="Permalink to this headline">¶</a></h2>
<p>Chalice supports binary payloads through its <code class="docutils literal notranslate"><span class="pre">app.api.binary_types</span></code> list. Any
type in this list is considered a binary <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code>. Whenever a request
with a <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header is encountered that matches an entry in the
<code class="docutils literal notranslate"><span class="pre">binary_types</span></code> list, its body will be available as a <code class="docutils literal notranslate"><span class="pre">bytes</span></code> type on the
property <code class="docutils literal notranslate"><span class="pre">app.current_request.raw_body</span></code>. Similarly, in order to send binary
data back in a response, simply set your <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header to something
present in the <code class="docutils literal notranslate"><span class="pre">binary_types</span></code> list. Note that you can override the default
types by modifying the <code class="docutils literal notranslate"><span class="pre">app.api.binary_types</span></code> list at the module level.</p>
<p>Here is an example app which simply echoes back binary content:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chalice</span> <span class="kn">import</span> <span class="n">Chalice</span><span class="p">,</span> <span class="n">Response</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Chalice</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;binary-response&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/bin-echo&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">],</span>
           <span class="n">content_types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;application/octet-stream&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">bin_echo</span><span class="p">():</span>
    <span class="n">raw_request_body</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">current_request</span><span class="o">.</span><span class="n">raw_body</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">raw_request_body</span><span class="p">,</span>
                    <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
                    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/octet-stream&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>You can see this app echo back binary data sent to it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo -n -e &quot;\xFE\xED&quot; | http POST $(chalice url)bin-echo \
  Accept:application/octet-stream Content-Type:application/octet-stream | xxd
0000000: feed                                     ..
</pre></div>
</div>
<p>Note that both the <code class="docutils literal notranslate"><span class="pre">Accept</span></code> and <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> headers are required. If
you fail to set the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header on the request will result in a
<code class="docutils literal notranslate"><span class="pre">415</span> <span class="pre">UnsupportedMediaType</span></code> error. Care must be taken when configuring what
<code class="docutils literal notranslate"><span class="pre">content_types</span></code> a route accepts, they must all be valid binary types, or they
must all be non-binary types. The <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header must also be set if the
data returned is to be the raw binary, if is omitted the call return a <code class="docutils literal notranslate"><span class="pre">400</span></code>
Bad Request response.</p>
<p>For example, here is the same call as above without the <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo -n -e &quot;\xFE\xED&quot; | http POST  $(chalice url)bin-echo \
  Content-Type:application/octet-stream
HTTP/1.1 400 Bad Request
Connection: keep-alive
Content-Length: 270
Content-Type: application/json
Date: Sat, 27 May 2017 07:09:51 GMT

{
  &quot;Code&quot;: &quot;BadRequest&quot;,
  &quot;Message&quot;: &quot;Request did not specify an Accept header with
    application/octet-stream, The response has a Content-Type of
    application/octet-stream. If a response has a binary Content-Type then
    the request must specify an Accept header that matches.&quot;
}
</pre></div>
</div>
</section>
<section id="usage-recommendations">
<h2>Usage Recommendations<a class="headerlink" href="#usage-recommendations" title="Permalink to this headline">¶</a></h2>
<p>If you want to return a JSON response body, just return the corresponding
python types directly.  You don’t need to use the <a class="reference internal" href="../api.html#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> class.
Chalice will automatically convert this to a JSON HTTP response as a
convenience for you.</p>
<p>Use the <a class="reference internal" href="../api.html#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> class when you want to return non-JSON content, or
when you want to inject custom HTTP headers to your response.</p>
<p>For errors, raise the built in <code class="docutils literal notranslate"><span class="pre">ChaliceViewError</span></code> subclasses (e.g
<code class="docutils literal notranslate"><span class="pre">BadRequestError</span></code>, <code class="docutils literal notranslate"><span class="pre">NotFoundError</span></code>, <code class="docutils literal notranslate"><span class="pre">ConflictError</span></code> etc)  when you
want to return a HTTP error response with a preconfigured JSON body containing
a <code class="docutils literal notranslate"><span class="pre">Code</span></code> and <code class="docutils literal notranslate"><span class="pre">Message</span></code>.</p>
<p>Use the <a class="reference internal" href="../api.html#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> class when you want to customize the error responses
to either return a different JSON error response body, or to return an HTTP
response that’s not <code class="docutils literal notranslate"><span class="pre">application/json</span></code>.</p>
</section>
</section>


                    
                    <section class="relations">
                        
                        <a href="routing.html" title="previous chapter" class="previous-page clearfix hidden-xs">← Routing</a>
                        
                        <a href="configfile.html" title="next chapter" class="next-page clearfix">Configuration File →</a>
                    </section>
                    
                </article><aside id="right-column" class="side-column hidden-sm">
                    <div class="column-body">
                        <section class="sidebar">
                            
                            <section class="next-previous">
                                
                                <a href="routing.html" title="previous chapter" class="previous-page clearfix hidden-xs">← Prev</a>
                                
                                <a href="configfile.html" title="next chapter" class="next-page clearfix">Next →</a>
                            </section>
                            
                            <ul>
<li><a class="reference internal" href="#">Views</a><ul>
<li><a class="reference internal" href="#view-function-parameters">View Function Parameters</a></li>
<li><a class="reference internal" href="#view-function-return-values">View Function Return Values</a></li>
<li><a class="reference internal" href="#error-handling">Error Handling</a></li>
<li><a class="reference internal" href="#specifying-http-methods">Specifying HTTP Methods</a></li>
<li><a class="reference internal" href="#binary-content">Binary Content</a></li>
<li><a class="reference internal" href="#usage-recommendations">Usage Recommendations</a></li>
</ul>
</li>
</ul>

                        </section>
                    </div>
                </aside></div>
        </section>
        
    
<footer id="footer">
    <div class="width-wrapper">
        <div class="copyright">
            <p>©2020, Amazon Web Services, Inc or its affiliates. All rights reserved.</p>
        </div>
    </div>
</footer>
  </body>
</html>