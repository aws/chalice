
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Custom Domain Names &#8212; AWS Chalice</title><link rel="stylesheet" href="../_static/bootstrap-reboot.css" type="text/css" />
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    <link rel="stylesheet" href="../_static/custom-tabs.css" type="text/css" />
    

    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script type="text/javascript">
        function _scroll(subjectId) {
            var subjectElement = $(subjectId);
            var actualSubjectHeight = subjectElement.height();
            var startingPosition = subjectElement[0].getBoundingClientRect().top;
            return function() {
                var availableHeight = $(window).height() - startingPosition;
                // Subtract the scroll position to account for sticky movement.
                availableHeight += Math.min($(window).scrollTop(), 40);
                var cappedHeight = Math.min(actualSubjectHeight, availableHeight);
                if (subjectElement.css("height") !== cappedHeight) {
                    subjectElement.css("height", cappedHeight);
                }
            };
        }

        // Scroll and resize the the columns when scrolled.
        $(function() {
            var rightScroll = _scroll("#right-column > .column-body");
            var scrollFn = function() {
                rightScroll.call(this, arguments);
            };
            scrollFn();
            $(window).scroll(scrollFn);
            $(window).resize(scrollFn);
        });

        // Scroll spy to change highlighted navigation element.
        $(function() {
            var section = document.querySelectorAll(".section");
            var sections = {};
            var i = 0;
            Array.prototype.forEach.call(section, function(e) {
                sections[e.id] = e.offsetTop;
            });
            var scrollSpy = function() {
                var scrollPosition = document.documentElement.scrollTop || document.body.scrollTop;
                for (i in sections) {
                    if (sections[i] <= scrollPosition) {
                        $('#right-column .current').removeClass('current');
                        $("#right-column a[href='#" + i + "']").addClass('current');
                    }
                }
            };
            $(window).scroll(scrollSpy);
            scrollSpy();
        });
    </script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-168492171-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-168492171-3');
    </script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Experimental APIs" href="experimental.html" />
    <link rel="prev" title="Continuous Deployment (CD)" href="cd.html" />
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  </head><body>
    <header>
        <div class="header-flex width-wrapper">
            <div class="site-logo">
                <a href="../index.html">
		  <span class="logo-icon"><img src="../_static/img/chalice-logo-icon-small.png" /></span>
                </a>
            </div>

            <ul id="page-navigation">
                <li class="site-page first"><a href="../quickstart.html">Quick Start</a></li>
                <li class="site-page"><a href="../tutorials/index.html">Tutorials</a></li>
                <li class="site-page"><a href="../samples/index.html">Samples</a></li>
                <li class="site-page"><a href="../main.html">Documentation</a></li>
                <li class="site-page"><a href="https://github.com/aws/chalice">Code</a></li>
                <li class="site-search hidden-sm">
                    <form action="../search.html" method="get">
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />
                        <input class="search-input" autocomplete="off" type="search" name="q" placeholder="Search" />
                    </form>
                </li>
            </ul>
        </div>
    </header>
    
        
        
        <section id="page-container">
            <div class="width-wrapper flex">
                <article id="document-body">
                    
                    <ul class="rel-parents">
                    <li><a href="index.html" accesskey="U">Topics</a></li>
                    </ul>
                    
                    
  <section id="custom-domain-names">
<h1>Custom Domain Names<a class="headerlink" href="#custom-domain-names" title="Permalink to this headline">¶</a></h1>
<p>Custom domain names are simpler and more intuitive URLs
that you can provide to your API users.
With custom domain names, you can set up your API’s hostname,
and choose a base path to map the alternative URL to your API.</p>
<p>You must have an AWS managed certificate created or imported through
AWS Certificate Manager (ACM) in order to configure a custom domain name
for REST and WebSocket APIs.
See <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-custom-domains-prerequisites.html">Get certificate in AWS Certificate Manager</a>
for more information.</p>
<p>Custom domain name can be configured per Chalice stage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This document describes the configuration option and process
needed to configure a custom domain with your Chalice application.
If you’d like a step-by-step example that walks you through configuring
a custom domain for a Chalice app using Amazon Route53 and ACM, see
the <a class="reference internal" href="../tutorials/customdomain.html"><span class="doc">Custom Domain Names</span></a> tutorial.</p>
</div>
<p>There are two steps to configuring a custom domain name.  First you must
configure your Chalice app such that it creates the necessary resources
and configuration when provisioning your REST or WebSocket APIs.  This
is explained in the next two sections below.
Then you must configure your DNS configuration to point your custom domain
name to the domain name created by API Gateway.  This is explained in the
<a class="reference internal" href="#dns-last-config"><span class="std std-ref">DNS Configuration</span></a> section below.</p>
<section id="configure-custom-domain-name-for-rest-api">
<h2>Configure custom domain name for REST API<a class="headerlink" href="#configure-custom-domain-name-for-rest-api" title="Permalink to this headline">¶</a></h2>
<p>To create custom domain name for REST API, add the
<code class="docutils literal notranslate"><span class="pre">api_gateway_custom_domain</span></code> configuration option to your
<code class="docutils literal notranslate"><span class="pre">.chalice/config.json</span></code> file.  You must specify the <code class="docutils literal notranslate"><span class="pre">certificate_arn</span></code>,
which is the ARN of your ACM certificate associated with your domain as
well as your <code class="docutils literal notranslate"><span class="pre">domain_name</span></code>.  The remaining fields are optional and
may be omitted.  By default TLS 1.2 is used for your endpoint unless
otherwise specified.</p>
<p>Below is an example of all the configuration options you can specify
when configuring a custom domain.  They are explained in the
<a class="reference internal" href="configfile.html#custom-domain-config-options"><span class="std std-ref">api_gateway_custom_domain</span></a> section of the <a class="reference internal" href="configfile.html"><span class="doc">Configuration File</span></a>
documentation.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;stages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dev&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;api_gateway_stage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;api&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;api_gateway_custom_domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;domain_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;api.example.com&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;tls_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TLS_1_2|TLS_1_0&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;certificate_arn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:acm:example&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;url_prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;foo&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tag1&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;key1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tag2&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="configure-custom-domain-name-for-websocket">
<h2>Configure custom domain name for WebSocket<a class="headerlink" href="#configure-custom-domain-name-for-websocket" title="Permalink to this headline">¶</a></h2>
<p>To create custom domain name for WebSocket API, add the
<code class="docutils literal notranslate"><span class="pre">websocket_api_custom_domain</span></code> configuration option to your
<code class="docutils literal notranslate"><span class="pre">.chalice/config.json</span></code> file.</p>
<p>Below is an example of all the configuration options you can specify when
configuring a custom domain for a WebSocket API.  They are explained in the
<a class="reference internal" href="configfile.html#custom-domain-ws-config-options"><span class="std std-ref">websocket_api_custom_domain</span></a> section of the <a class="reference internal" href="configfile.html"><span class="doc">Configuration File</span></a>
documentation.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;stages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dev&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;api_gateway_stage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;api&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;websocket_api_custom_domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;domain_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;api.example.com&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;tls_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TLS_1_2|TLS_1_0&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;certificate_arn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:acm:example&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;url_prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;foo&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tag1&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;key1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tag2&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="dns-configuration">
<span id="dns-last-config"></span><h2>DNS Configuration<a class="headerlink" href="#dns-configuration" title="Permalink to this headline">¶</a></h2>
<p>Chalice only configures your API Gateway API with the necessary resources
and configuration so a custom domain can be used.  It does not alter any
existing DNS records you have associated with your domain name.  After you’ve
deployed your Chalice app with the configuration options described above,
you’ll need to modify your DNS records to point to your API Gateway API
using the web interface or API of your domain registrar associated with
your domain name.  When you run <code class="docutils literal notranslate"><span class="pre">chalice</span> <span class="pre">deploy</span></code> with a custom domain
configured, there will be two new fields in the output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ chalice deploy
Creating deployment package.
Updating policy for IAM role: customdomain-dev
Updating lambda function: customdomain-dev
Updating rest API
Creating custom domain name: api.chalice-demo-app.com
Creating api mapping: /
Resources deployed:
  - Lambda ARN: arn:aws:lambda:us-west-2:0123456789:function:customdomain-dev
  - Rest API URL: https://qxea58abcd.execute-api.us-west-2.amazonaws.com/api/
  - Custom domain name:
      HostedZoneId: Z1UJRXOUMOOFQ8
      AliasDomainName: d-6vj4cynstd.execute-api.us-west-2.amazonaws.com
</pre></div>
</div>
<p>If you’re using Route53 to manage your hosted zone, you’ll need to create
an Alias record using the <code class="docutils literal notranslate"><span class="pre">HostedZoneId</span></code> and <code class="docutils literal notranslate"><span class="pre">AliasDomainName</span></code> specified
in the output of <code class="docutils literal notranslate"><span class="pre">chalice</span> <span class="pre">deploy</span></code>.  If you’re using a third party domain
registrar, you’ll need to create a CNAME record to the <code class="docutils literal notranslate"><span class="pre">AliasDomainName</span></code>.
If you’d like a step-by-step example of how to do this with Route53, see
the <a class="reference internal" href="../tutorials/customdomain.html"><span class="doc">Custom Domain Names</span></a> tutorial.</p>
</section>
</section>


                    
                    <section class="relations">
                        
                        <a href="cd.html" title="previous chapter" class="previous-page clearfix hidden-xs">← Continuous Deployment (CD)</a>
                        
                        <a href="experimental.html" title="next chapter" class="next-page clearfix">Experimental APIs →</a>
                    </section>
                    
                </article><aside id="right-column" class="side-column hidden-sm">
                    <div class="column-body">
                        <section class="sidebar">
                            
                            <section class="next-previous">
                                
                                <a href="cd.html" title="previous chapter" class="previous-page clearfix hidden-xs">← Prev</a>
                                
                                <a href="experimental.html" title="next chapter" class="next-page clearfix">Next →</a>
                            </section>
                            
                            <ul>
<li><a class="reference internal" href="#">Custom Domain Names</a><ul>
<li><a class="reference internal" href="#configure-custom-domain-name-for-rest-api">Configure custom domain name for REST API</a></li>
<li><a class="reference internal" href="#configure-custom-domain-name-for-websocket">Configure custom domain name for WebSocket</a></li>
<li><a class="reference internal" href="#dns-configuration">DNS Configuration</a></li>
</ul>
</li>
</ul>

                        </section>
                    </div>
                </aside></div>
        </section>
        
    
<footer id="footer">
    <div class="width-wrapper">
        <div class="copyright">
            <p>©2020, Amazon Web Services, Inc or its affiliates. All rights reserved.</p>
        </div>
    </div>
</footer>
  </body>
</html>